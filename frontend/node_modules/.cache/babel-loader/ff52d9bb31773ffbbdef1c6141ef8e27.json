{"ast":null,"code":"var _jsxFileName = \"E:\\\\TLCN\\\\LearningEnglishWebsite\\\\frontend\\\\src\\\\pages\\\\Profile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CameraIcon from \"@material-ui/icons/PhotoCamera\";\nimport InputCustom from \"components/UI/InputCustom\";\nimport { useSelector } from \"react-redux\";\nimport Button from \"@material-ui/core/Button\";\nimport VisibilityIcon from \"@material-ui/icons/Visibility\";\nimport VisibilityOffIcon from \"@material-ui/icons/VisibilityOff\";\nimport userApi from \"./../apis/userApi\";\nimport useTitle from \"hooks/useTitle\";\nimport { setMessage } from \"redux/actions/messageAction\";\nimport { useDispatch } from \"react-redux\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport { formatDate } from \"helper\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyle = makeStyles(() => ({\n  wrap: {\n    minHeight: \"calc(100vh - 7.2rem)\"\n  },\n  root: {\n    backgroundColor: \"var(--bg-color-sec)\",\n    padding: \"1.5rem 2.5rem\",\n    borderRadius: \"var(--border-radius)\",\n    textAlign: \"center\",\n    boxShadow: \"var(--box-shadow)\"\n  },\n  avtWrap: {\n    width: \"15rem\",\n    height: \"15rem\",\n    position: \"relative\"\n  },\n  avt: {\n    borderRadius: \"50%\",\n    border: \"2px solid var(--primary-color)\"\n  },\n  cameraIconWrap: {\n    position: \"absolute\",\n    right: 0,\n    bottom: 0,\n    width: \"4.2rem\",\n    height: \"4.2rem\",\n    padding: \"1.2rem\",\n    backgroundColor: \"var(--primary-color)\",\n    borderRadius: \"50%\",\n    cursor: \"pointer\",\n    border: \"solid 5px var(--bg-color-sec)\",\n    \"&:hover, &:active\": {\n      opacity: 0.85\n    }\n  },\n  cameraIcon: {\n    color: \"var(--text-color)\",\n    fontSize: \"2rem\"\n  },\n  fileInput: {\n    position: \"absolute\",\n    width: \"100%\",\n    height: \"100%\",\n    top: 0,\n    left: 0,\n    opacity: 0,\n    cursor: \"pointer\"\n  },\n  name: {\n    fontSize: \"2.4rem\",\n    lineHeight: 1.5,\n    letterSpacing: \"0.75px\"\n  },\n  role: {\n    fontSize: \"1.5rem\",\n    fontWeight: 400,\n    color: \"var(--label-color)\",\n    letterSpacing: \"0.75px\",\n    textTransform: \"capitalize\"\n  },\n  info: {\n    margin: \"2.4rem 0\",\n    \"& p\": {\n      lineHeight: 2,\n      fontSize: \"1.6rem\",\n      letterSpacing: \"0.75px\",\n      color: \"var(--text-color)\"\n    }\n  },\n  coin: {\n    color: \"var(--label-color)\",\n    fontWeight: \"bold\",\n    fontSize: \"2rem\"\n  },\n  icon: {\n    fontSize: \"1.8rem\",\n    color: \"var(--grey)\",\n    cursor: \"pointer\"\n  },\n  visiblePw: {\n    color: \"var(--primary-color)\"\n  },\n  visibleConfirmPw: {\n    color: \"var(--primary-color)\"\n  },\n  editBtn: {\n    padding: \"5px 10px\"\n  },\n  textError: {\n    marginTop: \"4px\",\n    color: \"var(--error-color)\",\n    fontSize: \"1.2rem\",\n    textAlign: \"left\"\n  }\n}));\nexport default function ProfilePage() {\n  _s();\n\n  useTitle(\"Profile\");\n  const dispatch = useDispatch();\n  const classes = useStyle();\n  const {\n    user\n  } = useSelector(state => state.authReducer);\n  const [data, setData] = useState({\n    name: user.name,\n    password: \"\",\n    confirmPassword: \"\"\n  });\n  const [avatar, setAvatar] = useState(false);\n  const [visiblePw, setVisiblePw] = useState(false);\n  const [visibleConfirmPw, setVisibleConfirmPw] = useState(false);\n  const [error, setError] = useState({\n    name: \"\",\n    password: \"\",\n    confirmPassword: \"\"\n  });\n  const [editMode, setEditMode] = useState(false);\n  const [image, setImage] = useState(\"\");\n  let avtRes;\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setData({ ...data,\n      [name]: value\n    });\n  };\n\n  const handleUpdateAvatar = async e => {\n    e.preventDefault();\n\n    try {\n      const file = e.target.files[0];\n\n      if (!file) {\n        dispatch(setMessage(\"No files were uploaded\", \"error\"));\n      }\n\n      if (file.size / 1024 ** 2 > 2) {\n        dispatch(setMessage(\"Size too large\", \"error\"));\n      }\n\n      setAvatar(URL.createObjectURL(file));\n      let formImage = new FormData();\n      formImage.append(\"file\", file);\n      setImage(formImage);\n    } catch (err) {\n      throw err;\n    }\n  };\n\n  const handleUpdateInfo = async () => {\n    if (data.name === \"\") {\n      return setError({ ...error,\n        name: \"Nhập tên của bạn\",\n        password: \"\",\n        confirmPassword: \"\"\n      });\n    }\n\n    try {\n      if (image !== '') {\n        avtRes = await userApi.updateAvatar(image);\n      }\n\n      const res = await userApi.updateProfile(data.name ? data.name : user.name, avatar ? avtRes.data.url : user.avatar);\n      dispatch(setMessage(res.data.message, \"success\"));\n      window.location.reload();\n    } catch (err) {}\n  };\n\n  const handleUpdatePassword = async () => {\n    if (data.password.length < 6 || data.confirmPassword.length < 6) {\n      return setError({ ...error,\n        name: \"\",\n        password: \"Mật khẩu phải ít nhất 6 ký tự\",\n        confirmPassword: \"Xác nhận mật khẩu phải ít nhất 6 ký tự\"\n      });\n    }\n\n    if (data.confirmPassword !== data.password) {\n      return setError({ ...error,\n        name: \"\",\n        password: \"\",\n        confirmPassword: \"Xác nhận mật khẩu không khớp\"\n      });\n    }\n\n    try {\n      const res = await userApi.updatePassword(data.password);\n\n      if (res) {\n        dispatch(setMessage(res.data.message, \"success\"));\n        setData({ ...data,\n          password: \"\",\n          confirmPassword: \"\"\n        });\n        window.location.reload();\n      }\n    } catch (err) {\n      dispatch(setMessage(err.response.data.message, \"error\"));\n    }\n  };\n\n  const handleUpdate = () => {\n    if (data.name || avatar) {\n      handleUpdateInfo();\n    }\n\n    if (data.password && data.confirmPassword) {\n      handleUpdatePassword();\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `${classes.wrap} container flex-center`,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.root,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-center w-100 h-100\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.avtWrap,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: avatar ? avatar : user.avatar,\n            alt: \"\",\n            className: `${classes.avt} w-100 h-100`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this), editMode && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `${classes.cameraIconWrap} flex-center`,\n            children: [/*#__PURE__*/_jsxDEV(CameraIcon, {\n              className: classes.cameraIcon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              className: classes.fileInput,\n              onChange: handleUpdateAvatar,\n              accept: \"image/*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this), !editMode ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-10\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: classes.name,\n          children: user.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: classes.role,\n          children: user.roleType\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-col mt-10\",\n        children: [/*#__PURE__*/_jsxDEV(InputCustom, {\n          label: \"H\\u1ECD t\\xEAn\",\n          autoComplete: \"off\",\n          size: \"small\",\n          error: error.name,\n          defaultValue: user.name,\n          placeholder: \"Nh\\u1EADp h\\u1ECD t\\xEAn\",\n          inputProps: {\n            name: \"name\"\n          },\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 13\n        }, this), error.name !== \"\" && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: classes.textError,\n          children: error.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(InputCustom, {\n          label: \"M\\u1EADt kh\\u1EA9u\",\n          autoComplete: \"off\",\n          className: \"mt-10\",\n          size: \"small\",\n          placeholder: \"Nh\\u1EADp m\\u1EADt kh\\u1EA9u\",\n          error: error.password,\n          inputProps: {\n            name: \"password\",\n            type: visiblePw ? \"text\" : \"password\"\n          },\n          onChange: handleChange,\n          endAdornment: visiblePw ? /*#__PURE__*/_jsxDEV(VisibilityIcon, {\n            className: `${classes.icon} ${classes.visiblePw}`,\n            onClick: () => setVisiblePw(false)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(VisibilityOffIcon, {\n            className: classes.icon,\n            onClick: () => setVisiblePw(true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 13\n        }, this), error.password !== \"\" && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: classes.textError,\n          children: error.password\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(InputCustom, {\n          label: \"X\\xE1c nh\\u1EADn m\\u1EADt kh\\u1EA9u\",\n          autoComplete: \"off\",\n          size: \"small\",\n          className: \"mt-10\",\n          placeholder: \"Nh\\u1EADp l\\u1EA1i m\\u1EADt kh\\u1EA9u\",\n          error: error.confirmPassword,\n          inputProps: {\n            name: \"confirmPassword\",\n            type: visibleConfirmPw ? \"text\" : \"password\"\n          },\n          onChange: handleChange,\n          endAdornment: visibleConfirmPw ? /*#__PURE__*/_jsxDEV(VisibilityIcon, {\n            className: `${classes.icon} ${classes.visibleConfirmPw}`,\n            onClick: () => setVisibleConfirmPw(false)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(VisibilityOffIcon, {\n            className: classes.icon,\n            onClick: () => setVisibleConfirmPw(true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 13\n        }, this), error.confirmPassword !== \"\" && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: classes.textError,\n          children: error.confirmPassword\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.info,\n        children: [!editMode && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: user.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\u0110\\xE3 tham gia v\\xE0o \", formatDate(user.createdAt)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"S\\u1ED1 coin hi\\u1EC7n t\\u1EA1i: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: classes.coin,\n            children: user.coin\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 31\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 9\n      }, this), !editMode ? /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => setEditMode(true),\n        className: `${classes.editBtn} _btn _btn-primary w-100`,\n        startIcon: /*#__PURE__*/_jsxDEV(EditIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 24\n        }, this),\n        children: \"Ch\\u1EC9nh s\\u1EEDa\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex w-100\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setEditMode(false),\n          className: `${classes.editBtn} _btn _btn-outlined-accent w-50 mr-2`,\n          children: \"Hu\\u1EF7 b\\u1ECF\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: `${classes.editBtn} _btn _btn-primary w-50`,\n          onClick: handleUpdate,\n          children: \"C\\u1EADp nh\\u1EADt\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 235,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ProfilePage, \"0DLzO7EJG4dDlGsykBwvL/w1uNs=\", false, function () {\n  return [useTitle, useDispatch, useStyle, useSelector];\n});\n\n_c = ProfilePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfilePage\");","map":{"version":3,"sources":["E:/TLCN/LearningEnglishWebsite/frontend/src/pages/Profile.js"],"names":["React","useState","makeStyles","CameraIcon","InputCustom","useSelector","Button","VisibilityIcon","VisibilityOffIcon","userApi","useTitle","setMessage","useDispatch","EditIcon","formatDate","useStyle","wrap","minHeight","root","backgroundColor","padding","borderRadius","textAlign","boxShadow","avtWrap","width","height","position","avt","border","cameraIconWrap","right","bottom","cursor","opacity","cameraIcon","color","fontSize","fileInput","top","left","name","lineHeight","letterSpacing","role","fontWeight","textTransform","info","margin","coin","icon","visiblePw","visibleConfirmPw","editBtn","textError","marginTop","ProfilePage","dispatch","classes","user","state","authReducer","data","setData","password","confirmPassword","avatar","setAvatar","setVisiblePw","setVisibleConfirmPw","error","setError","editMode","setEditMode","image","setImage","avtRes","handleChange","e","value","target","handleUpdateAvatar","preventDefault","file","files","size","URL","createObjectURL","formImage","FormData","append","err","handleUpdateInfo","updateAvatar","res","updateProfile","url","message","window","location","reload","handleUpdatePassword","length","updatePassword","response","handleUpdate","roleType","type","email","createdAt"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CameraIcon from \"@material-ui/icons/PhotoCamera\";\nimport InputCustom from \"components/UI/InputCustom\";\nimport { useSelector } from \"react-redux\";\nimport Button from \"@material-ui/core/Button\";\nimport VisibilityIcon from \"@material-ui/icons/Visibility\";\nimport VisibilityOffIcon from \"@material-ui/icons/VisibilityOff\";\nimport userApi from \"./../apis/userApi\";\nimport useTitle from \"hooks/useTitle\";\nimport { setMessage } from \"redux/actions/messageAction\";\nimport { useDispatch } from \"react-redux\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport { formatDate } from \"helper\";\n\nconst useStyle = makeStyles(() => ({\n  wrap: {\n    minHeight: \"calc(100vh - 7.2rem)\",\n  },\n\n  root: {\n    backgroundColor: \"var(--bg-color-sec)\",\n    padding: \"1.5rem 2.5rem\",\n    borderRadius: \"var(--border-radius)\",\n    textAlign: \"center\",\n    boxShadow: \"var(--box-shadow)\",\n  },\n\n  avtWrap: {\n    width: \"15rem\",\n    height: \"15rem\",\n    position: \"relative\",\n  },\n\n  avt: {\n    borderRadius: \"50%\",\n    border: \"2px solid var(--primary-color)\",\n  },\n\n  cameraIconWrap: {\n    position: \"absolute\",\n    right: 0,\n    bottom: 0,\n\n    width: \"4.2rem\",\n    height: \"4.2rem\",\n    padding: \"1.2rem\",\n\n    backgroundColor: \"var(--primary-color)\",\n    borderRadius: \"50%\",\n    cursor: \"pointer\",\n    border: \"solid 5px var(--bg-color-sec)\",\n\n    \"&:hover, &:active\": {\n      opacity: 0.85,\n    },\n  },\n\n  cameraIcon: {\n    color: \"var(--text-color)\",\n    fontSize: \"2rem\",\n  },\n\n  fileInput: {\n    position: \"absolute\",\n    width: \"100%\",\n    height: \"100%\",\n    top: 0,\n    left: 0,\n    opacity: 0,\n    cursor: \"pointer\",\n  },\n\n  name: {\n    fontSize: \"2.4rem\",\n    lineHeight: 1.5,\n    letterSpacing: \"0.75px\",\n  },\n\n  role: {\n    fontSize: \"1.5rem\",\n    fontWeight: 400,\n    color: \"var(--label-color)\",\n    letterSpacing: \"0.75px\",\n    textTransform: \"capitalize\",\n  },\n\n  info: {\n    margin: \"2.4rem 0\",\n\n    \"& p\": {\n      lineHeight: 2,\n      fontSize: \"1.6rem\",\n      letterSpacing: \"0.75px\",\n      color: \"var(--text-color)\",\n    },\n  },\n\n  coin: {\n    color: \"var(--label-color)\",\n    fontWeight: \"bold\",\n    fontSize: \"2rem\",\n  },\n  icon: {\n    fontSize: \"1.8rem\",\n    color: \"var(--grey)\",\n    cursor: \"pointer\",\n  },\n\n  visiblePw: {\n    color: \"var(--primary-color)\",\n  },\n  visibleConfirmPw: {\n    color: \"var(--primary-color)\",\n  },\n  editBtn: {\n    padding: \"5px 10px\",\n  },\n  textError: {\n    marginTop: \"4px\",\n    color: \"var(--error-color)\",\n    fontSize: \"1.2rem\",\n    textAlign: \"left\",\n  },\n}));\n\nexport default function ProfilePage() {\n  useTitle(\"Profile\");\n  const dispatch = useDispatch();\n  const classes = useStyle();\n  const { user } = useSelector((state) => state.authReducer);\n  const [data, setData] = useState({\n    name: user.name,\n    password: \"\",\n    confirmPassword: \"\",\n  });\n  const [avatar, setAvatar] = useState(false);\n  const [visiblePw, setVisiblePw] = useState(false);\n  const [visibleConfirmPw, setVisibleConfirmPw] = useState(false);\n  const [error, setError] = useState({\n    name: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n  });\n  const [editMode, setEditMode] = useState(false);\n  const [image, setImage] = useState(\"\");\n  let avtRes;\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setData({ ...data, [name]: value });\n  };\n\n  const handleUpdateAvatar = async (e) => {\n    e.preventDefault();\n    try {\n      const file = e.target.files[0];\n      if (!file) {\n        dispatch(setMessage(\"No files were uploaded\", \"error\"));\n      }\n      if (file.size / 1024 ** 2 > 2) {\n        dispatch(setMessage(\"Size too large\", \"error\"));\n      }\n      setAvatar(URL.createObjectURL(file));\n      let formImage = new FormData();\n      formImage.append(\"file\", file);\n      setImage(formImage);\n    } catch (err) {\n      throw err;\n    }\n  };\n\n  const handleUpdateInfo = async () => {\n    if (data.name === \"\") {\n      return setError({\n        ...error,\n        name: \"Nhập tên của bạn\",\n        password: \"\",\n        confirmPassword: \"\",\n      });\n    }\n    try {\n      \n      if (image !== '') {\n        avtRes = await userApi.updateAvatar(image);\n      }\n      const res = await userApi.updateProfile(\n        data.name ? data.name : user.name,\n        avatar ? avtRes.data.url : user.avatar\n      );\n      dispatch(setMessage(res.data.message, \"success\"));\n      window.location.reload();\n    } catch (err) {}\n  };\n\n  const handleUpdatePassword = async () => {\n    if (data.password.length < 6 || data.confirmPassword.length < 6) {\n      return setError({\n        ...error,\n        name: \"\",\n        password: \"Mật khẩu phải ít nhất 6 ký tự\",\n        confirmPassword: \"Xác nhận mật khẩu phải ít nhất 6 ký tự\",\n      });\n    }\n    if (data.confirmPassword !== data.password) {\n      return setError({\n        ...error,\n        name: \"\",\n        password: \"\",\n        confirmPassword: \"Xác nhận mật khẩu không khớp\",\n      });\n    }\n    try {\n      const res = await userApi.updatePassword(data.password);\n      if (res) {\n        dispatch(setMessage(res.data.message, \"success\"));\n        setData({ ...data, password: \"\", confirmPassword: \"\" });\n        window.location.reload();\n      }\n    } catch (err) {\n      dispatch(setMessage(err.response.data.message, \"error\"));\n    }\n  };\n\n  const handleUpdate = () => {\n    if (data.name || avatar) {\n      handleUpdateInfo();\n    }\n    if (data.password && data.confirmPassword) {\n      handleUpdatePassword();\n    }\n  };\n\n  return (\n    <div className={`${classes.wrap} container flex-center`}>\n      <div className={classes.root}>\n        <div className=\"flex-center w-100 h-100\">\n          <div className={classes.avtWrap}>\n            <img\n              src={avatar ? avatar : user.avatar}\n              alt=\"\"\n              className={`${classes.avt} w-100 h-100`}\n            />\n            {editMode && (\n              <div className={`${classes.cameraIconWrap} flex-center`}>\n                <CameraIcon className={classes.cameraIcon} />\n                <input\n                  type=\"file\"\n                  className={classes.fileInput}\n                  onChange={handleUpdateAvatar}\n                  accept=\"image/*\"\n                />\n              </div>\n            )}\n          </div>\n        </div>\n        {!editMode ? (\n          <div className=\"mt-10\">\n            <h2 className={classes.name}>{user.name}</h2>\n            <h4 className={classes.role}>{user.roleType}</h4>\n          </div>\n        ) : (\n          <div className=\"flex-col mt-10\">\n            <InputCustom\n              label=\"Họ tên\"\n              autoComplete=\"off\"\n              size=\"small\"\n              error={error.name}\n              defaultValue={user.name}\n              placeholder=\"Nhập họ tên\"\n              inputProps={{\n                name: \"name\",\n              }}\n              onChange={handleChange}\n            />\n            {error.name !== \"\" && (\n              <p className={classes.textError}>{error.name}</p>\n            )}\n            <InputCustom\n              label=\"Mật khẩu\"\n              autoComplete=\"off\"\n              className=\"mt-10\"\n              size=\"small\"\n              placeholder=\"Nhập mật khẩu\"\n              error={error.password}\n              inputProps={{\n                name: \"password\",\n                type: visiblePw ? \"text\" : \"password\",\n              }}\n              onChange={handleChange}\n              endAdornment={\n                visiblePw ? (\n                  <VisibilityIcon\n                    className={`${classes.icon} ${classes.visiblePw}`}\n                    onClick={() => setVisiblePw(false)}\n                  />\n                ) : (\n                  <VisibilityOffIcon\n                    className={classes.icon}\n                    onClick={() => setVisiblePw(true)}\n                  />\n                )\n              }\n            />\n            {error.password !== \"\" && (\n              <p className={classes.textError}>{error.password}</p>\n            )}\n            <InputCustom\n              label=\"Xác nhận mật khẩu\"\n              autoComplete=\"off\"\n              size=\"small\"\n              className=\"mt-10\"\n              placeholder=\"Nhập lại mật khẩu\"\n              error={error.confirmPassword}\n              inputProps={{\n                name: \"confirmPassword\",\n                type: visibleConfirmPw ? \"text\" : \"password\",\n              }}\n              onChange={handleChange}\n              endAdornment={\n                visibleConfirmPw ? (\n                  <VisibilityIcon\n                    className={`${classes.icon} ${classes.visibleConfirmPw}`}\n                    onClick={() => setVisibleConfirmPw(false)}\n                  />\n                ) : (\n                  <VisibilityOffIcon\n                    className={classes.icon}\n                    onClick={() => setVisibleConfirmPw(true)}\n                  />\n                )\n              }\n            />\n            {error.confirmPassword !== \"\" && (\n              <p className={classes.textError}>{error.confirmPassword}</p>\n            )}\n          </div>\n        )}\n\n        <div className={classes.info}>\n          {!editMode && <p>{user.email}</p>}\n          <p>Đã tham gia vào {formatDate(user.createdAt)}</p>\n          <p>\n            Số coin hiện tại: <span className={classes.coin}>{user.coin}</span>\n          </p>\n        </div>\n\n        {!editMode ? (\n          <Button\n            onClick={() => setEditMode(true)}\n            className={`${classes.editBtn} _btn _btn-primary w-100`}\n            startIcon={<EditIcon />}\n          >\n            Chỉnh sửa\n          </Button>\n        ) : (\n          <div className=\"d-flex w-100\">\n            <Button\n              onClick={() => setEditMode(false)}\n              className={`${classes.editBtn} _btn _btn-outlined-accent w-50 mr-2`}\n            >\n              Huỷ bỏ\n            </Button>\n            <Button\n              className={`${classes.editBtn} _btn _btn-primary w-50`}\n              onClick={handleUpdate}\n            >\n              Cập nhật\n            </Button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}