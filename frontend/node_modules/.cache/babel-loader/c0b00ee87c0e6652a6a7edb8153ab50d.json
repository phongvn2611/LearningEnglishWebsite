{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nlet globalVoices = []; // get voice in redux\n\nfunction useSpeaker() {\n  _s();\n\n  const [voices, setVoices] = useState(globalVoices);\n  const {\n    speed,\n    voiceURI,\n    volume\n  } = useSelector(state => state.voiceReducer);\n  const voice = voices.find(i => i.voiceURI === voiceURI);\n  useEffect(() => {\n    if (globalVoices.length > 0) return;\n    const intervalId = setInterval(() => {\n      const voiceList = window.speechSynthesis.getVoices();\n\n      if (voiceList.length > 0) {\n        globalVoices = voiceList.filter(i => i.lang.indexOf('en') !== -1);\n        setVoices(voiceList.filter(i => i.lang.indexOf('en') !== -1));\n        clearInterval(intervalId);\n      }\n    }, 50);\n    return () => {\n      intervalId && clearInterval(intervalId);\n    };\n  }, []);\n  return {\n    speed,\n    volume,\n    voice\n  };\n}\n\n_s(useSpeaker, \"c9TVPCk5d1LIdztO0V4SupTQX1A=\", false, function () {\n  return [useSelector];\n});\n\nexport default useSpeaker;","map":{"version":3,"sources":["E:/TLCN/LearningEnglishWebsite/frontend/src/hooks/useSpeaker.js"],"names":["useEffect","useState","useSelector","globalVoices","useSpeaker","voices","setVoices","speed","voiceURI","volume","state","voiceReducer","voice","find","i","length","intervalId","setInterval","voiceList","window","speechSynthesis","getVoices","filter","lang","indexOf","clearInterval"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,WAAT,QAA4B,aAA5B;AAEA,IAAIC,YAAY,GAAG,EAAnB,C,CAEA;;AACA,SAASC,UAAT,GAAsB;AAAA;;AACpB,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBL,QAAQ,CAACE,YAAD,CAApC;AACA,QAAM;AAAEI,IAAAA,KAAF;AAASC,IAAAA,QAAT;AAAmBC,IAAAA;AAAnB,MAA8BP,WAAW,CAAEQ,KAAD,IAAWA,KAAK,CAACC,YAAlB,CAA/C;AACA,QAAMC,KAAK,GAAGP,MAAM,CAACQ,IAAP,CAAaC,CAAD,IAAOA,CAAC,CAACN,QAAF,KAAeA,QAAlC,CAAd;AAEAR,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIG,YAAY,CAACY,MAAb,GAAsB,CAA1B,EAA6B;AAE7B,UAAMC,UAAU,GAAGC,WAAW,CAAC,MAAM;AACnC,YAAMC,SAAS,GAAGC,MAAM,CAACC,eAAP,CAAuBC,SAAvB,EAAlB;;AACA,UAAIH,SAAS,CAACH,MAAV,GAAmB,CAAvB,EAA0B;AACxBZ,QAAAA,YAAY,GAAGe,SAAS,CAACI,MAAV,CAAkBR,CAAD,IAAOA,CAAC,CAACS,IAAF,CAAOC,OAAP,CAAe,IAAf,MAAyB,CAAC,CAAlD,CAAf;AACAlB,QAAAA,SAAS,CAACY,SAAS,CAACI,MAAV,CAAkBR,CAAD,IAAOA,CAAC,CAACS,IAAF,CAAOC,OAAP,CAAe,IAAf,MAAyB,CAAC,CAAlD,CAAD,CAAT;AACAC,QAAAA,aAAa,CAACT,UAAD,CAAb;AACD;AACF,KAP6B,EAO3B,EAP2B,CAA9B;AASA,WAAO,MAAM;AACXA,MAAAA,UAAU,IAAIS,aAAa,CAACT,UAAD,CAA3B;AACD,KAFD;AAGD,GAfQ,EAeN,EAfM,CAAT;AAiBA,SAAO;AAAET,IAAAA,KAAF;AAASE,IAAAA,MAAT;AAAiBG,IAAAA;AAAjB,GAAP;AACD;;GAvBQR,U;UAE6BF,W;;;AAuBtC,eAAeE,UAAf","sourcesContent":["import { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nlet globalVoices = [];\n\n// get voice in redux\nfunction useSpeaker() {\n  const [voices, setVoices] = useState(globalVoices);\n  const { speed, voiceURI, volume } = useSelector((state) => state.voiceReducer);\n  const voice = voices.find((i) => i.voiceURI === voiceURI);\n\n  useEffect(() => {\n    if (globalVoices.length > 0) return;\n\n    const intervalId = setInterval(() => {\n      const voiceList = window.speechSynthesis.getVoices();\n      if (voiceList.length > 0) {\n        globalVoices = voiceList.filter((i) => i.lang.indexOf('en') !== -1);\n        setVoices(voiceList.filter((i) => i.lang.indexOf('en') !== -1));\n        clearInterval(intervalId);\n      }\n    }, 50);\n\n    return () => {\n      intervalId && clearInterval(intervalId);\n    };\n  }, []);\n\n  return { speed, volume, voice };\n}\n\nexport default useSpeaker;\n"]},"metadata":{},"sourceType":"module"}