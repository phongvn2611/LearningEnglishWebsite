{"ast":null,"code":"import { COLOR_VAR_KEYS, VOICE_KEYS, DEFAULTS, THEME_KEYS } from \"./../constants/index\";\nconst htmlRoot = document.querySelector(\":root\"); // prevent execute continuously a function\n\nexport const debounce = (timer = null, cbFn, delay = 350) => {\n  if (timer) {\n    clearTimeout(timer);\n  }\n\n  return setTimeout(cbFn, delay);\n}; // compare 2 arrays\n\nexport const equalArray = (a, b) => {\n  return Array.isArray(a) && Array.isArray(b) && a.length === b.length && a.every((val, index) => val === b[index]);\n}; // convert image to Base64\n\nexport const convertImageToBase64 = image => {\n  const reader = new FileReader();\n  reader.readAsDataURL(image);\n  return new Promise(resolve => {\n    reader.onloadend = () => {\n      resolve(reader.result);\n    };\n  });\n}; // get current root palettes\n\nfunction getRootPalettes() {\n  let palettes = [];\n  const rootStyles = getComputedStyle(htmlRoot);\n  COLOR_VAR_KEYS.forEach(item => {\n    let color = rootStyles.getPropertyValue(item.key);\n    palettes.push({ ...item,\n      color: color[0] === \"#\" ? color : color.slice(1) // output ' #123456' => slice(1) = '#123456'\n\n    });\n  });\n  return palettes;\n} // get custom palettes from local storage\n\n\nexport const getCustomPalettes = () => {\n  const palettes = localStorage.getItem(THEME_KEYS.PALETTE_KEY);\n\n  if (!palettes) {\n    const newPalettes = getRootPalettes();\n    localStorage.setItem(THEME_KEYS.PALETTE_KEY, JSON.stringify(newPalettes));\n    return newPalettes;\n  } else {\n    return JSON.parse(palettes);\n  }\n}; // set palettes for root\n\nexport const setRootPalettes = () => {\n  const palettes = getCustomPalettes();\n  palettes === null || palettes === void 0 ? void 0 : palettes.forEach(item => htmlRoot.style.setProperty(item.key, item.color));\n}; // get window voice list\n\nexport const getSpeechSynthesis = () => {\n  return new Promise(resolve => {\n    let synth = window.speechSynthesis;\n    let intervalId;\n    intervalId = setInterval(() => {\n      if (synth.getVoices().length !== 0) {\n        clearInterval(intervalId);\n        resolve(synth.getVoices());\n      }\n    }, 20);\n  });\n}; // update or add custom voice in local storage\n\nexport const updateLSVoice = (key, value) => {\n  let current = localStorage.getItem(VOICE_KEYS.LS_KEY);\n  let newLSVoice = {};\n\n  if (current) {\n    newLSVoice = JSON.parse(current);\n    newLSVoice[key] = value;\n  } else {\n    newLSVoice = {\n      voiceURI: DEFAULTS.VOICE_URI,\n      speed: DEFAULTS.VOICE_SPEED,\n      volume: DEFAULTS.VOICE_VOLUME\n    };\n    newLSVoice[key] = value;\n  }\n\n  localStorage.setItem(VOICE_KEYS.LS_KEY, JSON.stringify(newLSVoice));\n}; // optimize images\n\nexport const cloudinaryImgOptimize = (originSrc = \"\", width = 0, height = 0, fAuto = true, qAuto = true, others = \"\") => {\n  if (!originSrc) return \"\";\n  const cloudinaryBaseURL = \"https://res.cloudinary.com/dynonary/image/upload\";\n  const index = originSrc.indexOf(cloudinaryBaseURL); // Not cloudinary source\n\n  if (index === -1) {\n    return originSrc;\n  }\n\n  let optimize = `${width > 0 ? `w_${width},` : \"\"}${height > 0 ? `h_${height},` : \"\"}${fAuto ? \"f_auto,\" : \"\"}${qAuto ? \"q_auto,\" : \"\"}${others && others !== \"\" ? others : \"\"}`;\n  if (optimize[optimize.length - 1] === \",\") optimize = optimize.slice(0, optimize.length - 1);\n  return originSrc.replace(cloudinaryBaseURL, `${cloudinaryBaseURL}/${optimize}`);\n};\nexport const addOrDelItemInArray = (arr = [], item) => {\n  if (!arr || !Array.isArray(arr)) return arr;\n  const index = arr.findIndex(i => i === item);\n\n  if (index === -1) {\n    arr.push(item);\n    return arr;\n  }\n\n  arr.splice(index, 1);\n  return arr;\n};\nexport const formatDate = (date = new Date()) => {\n  try {\n    const d = new Date(date);\n    const day = `0${d.getDate()}`.slice(-2);\n    const m = `0${d.getMonth() + 1}`.slice(-2);\n    const y = d.getFullYear();\n    return `${day}-${m}-${y}`;\n  } catch (error) {\n    return date;\n  }\n};","map":{"version":3,"sources":["E:/TLCN/LearningEnglishWebsite/frontend/src/helper/index.js"],"names":["COLOR_VAR_KEYS","VOICE_KEYS","DEFAULTS","THEME_KEYS","htmlRoot","document","querySelector","debounce","timer","cbFn","delay","clearTimeout","setTimeout","equalArray","a","b","Array","isArray","length","every","val","index","convertImageToBase64","image","reader","FileReader","readAsDataURL","Promise","resolve","onloadend","result","getRootPalettes","palettes","rootStyles","getComputedStyle","forEach","item","color","getPropertyValue","key","push","slice","getCustomPalettes","localStorage","getItem","PALETTE_KEY","newPalettes","setItem","JSON","stringify","parse","setRootPalettes","style","setProperty","getSpeechSynthesis","synth","window","speechSynthesis","intervalId","setInterval","getVoices","clearInterval","updateLSVoice","value","current","LS_KEY","newLSVoice","voiceURI","VOICE_URI","speed","VOICE_SPEED","volume","VOICE_VOLUME","cloudinaryImgOptimize","originSrc","width","height","fAuto","qAuto","others","cloudinaryBaseURL","indexOf","optimize","replace","addOrDelItemInArray","arr","findIndex","i","splice","formatDate","date","Date","d","day","getDate","m","getMonth","y","getFullYear","error"],"mappings":"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","sourcesContent":["import {\n  COLOR_VAR_KEYS,\n  VOICE_KEYS,\n  DEFAULTS,\n  THEME_KEYS,\n} from \"./../constants/index\";\nconst htmlRoot = document.querySelector(\":root\");\n\n// prevent execute continuously a function\nexport const debounce = (timer = null, cbFn, delay = 350) => {\n  if (timer) {\n    clearTimeout(timer);\n  }\n  return setTimeout(cbFn, delay);\n};\n\n// compare 2 arrays\nexport const equalArray = (a, b) => {\n  return (\n    Array.isArray(a) &&\n    Array.isArray(b) &&\n    a.length === b.length &&\n    a.every((val, index) => val === b[index])\n  );\n};\n\n// convert image to Base64\nexport const convertImageToBase64 = (image) => {\n  const reader = new FileReader();\n  reader.readAsDataURL(image);\n  return new Promise((resolve) => {\n    reader.onloadend = () => {\n      resolve(reader.result);\n    };\n  });\n};\n\n// get current root palettes\nfunction getRootPalettes() {\n  let palettes = [];\n  const rootStyles = getComputedStyle(htmlRoot);\n\n  COLOR_VAR_KEYS.forEach((item) => {\n    let color = rootStyles.getPropertyValue(item.key);\n\n    palettes.push({\n      ...item,\n      color: color[0] === \"#\" ? color : color.slice(1), // output ' #123456' => slice(1) = '#123456'\n    });\n  });\n\n  return palettes;\n}\n\n// get custom palettes from local storage\nexport const getCustomPalettes = () => {\n  const palettes = localStorage.getItem(THEME_KEYS.PALETTE_KEY);\n  if (!palettes) {\n    const newPalettes = getRootPalettes();\n    localStorage.setItem(THEME_KEYS.PALETTE_KEY, JSON.stringify(newPalettes));\n    return newPalettes;\n  } else {\n    return JSON.parse(palettes);\n  }\n};\n\n// set palettes for root\nexport const setRootPalettes = () => {\n  const palettes = getCustomPalettes();\n  palettes?.forEach((item) => htmlRoot.style.setProperty(item.key, item.color));\n};\n\n// get window voice list\nexport const getSpeechSynthesis = () => {\n  return new Promise((resolve) => {\n    let synth = window.speechSynthesis;\n    let intervalId;\n\n    intervalId = setInterval(() => {\n      if (synth.getVoices().length !== 0) {\n        clearInterval(intervalId);\n        resolve(synth.getVoices());\n      }\n    }, 20);\n  });\n};\n\n// update or add custom voice in local storage\nexport const updateLSVoice = (key, value) => {\n  let current = localStorage.getItem(VOICE_KEYS.LS_KEY);\n  let newLSVoice = {};\n\n  if (current) {\n    newLSVoice = JSON.parse(current);\n    newLSVoice[key] = value;\n  } else {\n    newLSVoice = {\n      voiceURI: DEFAULTS.VOICE_URI,\n      speed: DEFAULTS.VOICE_SPEED,\n      volume: DEFAULTS.VOICE_VOLUME,\n    };\n    newLSVoice[key] = value;\n  }\n\n  localStorage.setItem(VOICE_KEYS.LS_KEY, JSON.stringify(newLSVoice));\n};\n\n// optimize images\nexport const cloudinaryImgOptimize = (\n  originSrc = \"\",\n  width = 0,\n  height = 0,\n  fAuto = true,\n  qAuto = true,\n  others = \"\"\n) => {\n  if (!originSrc) return \"\";\n\n  const cloudinaryBaseURL = \"https://res.cloudinary.com/dynonary/image/upload\";\n  const index = originSrc.indexOf(cloudinaryBaseURL);\n\n  // Not cloudinary source\n  if (index === -1) {\n    return originSrc;\n  }\n\n  let optimize = `${width > 0 ? `w_${width},` : \"\"}${\n    height > 0 ? `h_${height},` : \"\"\n  }${fAuto ? \"f_auto,\" : \"\"}${qAuto ? \"q_auto,\" : \"\"}${\n    others && others !== \"\" ? others : \"\"\n  }`;\n\n  if (optimize[optimize.length - 1] === \",\")\n    optimize = optimize.slice(0, optimize.length - 1);\n\n  return originSrc.replace(\n    cloudinaryBaseURL,\n    `${cloudinaryBaseURL}/${optimize}`\n  );\n};\n\nexport const addOrDelItemInArray = (arr = [], item) => {\n  if (!arr || !Array.isArray(arr)) return arr;\n\n  const index = arr.findIndex((i) => i === item);\n\n  if (index === -1) {\n    arr.push(item);\n    return arr;\n  }\n\n  arr.splice(index, 1);\n  return arr;\n};\n\nexport const formatDate = (date = new Date()) => {\n  try {\n    const d = new Date(date);\n    const day = `0${d.getDate()}`.slice(-2);\n    const m = `0${d.getMonth() + 1}`.slice(-2);\n    const y = d.getFullYear();\n    return `${day}-${m}-${y}`;\n  } catch (error) {\n    return date;\n  }\n};\n"]},"metadata":{},"sourceType":"module"}