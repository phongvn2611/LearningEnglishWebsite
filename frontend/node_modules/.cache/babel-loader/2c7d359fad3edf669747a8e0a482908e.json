{"ast":null,"code":"var _jsxFileName = \"E:\\\\TLCN\\\\LearningEnglishWebsite\\\\frontend\\\\src\\\\components\\\\GrammarAdmin\\\\EditGrammar\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport LoopIcon from '@material-ui/icons/Loop';\nimport ResetIcon from '@material-ui/icons/RotateLeft';\nimport SaveIcon from '@material-ui/icons/Save';\nimport InputCustom from 'components/UI/InputCustom';\nimport SelectCustom from 'components/UI/SelectCustom';\nimport PropTypes from 'prop-types';\nimport React, { useRef, useState, useEffect } from 'react';\nimport { useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport InformationTooltip from './InformationTooltip';\nimport useStyle from './style';\nimport Box from \"@material-ui/core/Box\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport { useHistory } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { setMessage } from \"redux/actions/messageAction\";\nimport { convertImageToBase64 } from 'helper';\nimport { GRAMMAR_LEVEL } from 'constants/grammarLevels';\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport { DialogActions } from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\nimport InfiniteScroll from 'components/UI/InfiniteScroll';\nimport grammarApi from 'apis/grammarApi';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { useParams } from \"react-router-dom\";\nimport RichTextEditor from 'components/UI/RichTextEditor';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst schema = yup.object().shape({\n  Title: yup.string().trim().required('Input value'),\n  Content: yup.string().required('Input value'),\n  Level: yup.string().required('Select one').oneOf(GRAMMAR_LEVEL.map(i => i.value)),\n  LinkVideo: yup.string(),\n  Script: yup.string()\n});\n\nconst analysisLinkVideo = (linkVideo = '') => {\n  if (typeof linkVideo !== 'string' || linkVideo === '') {\n    return null;\n  }\n\n  if (linkVideo.includes(\"embed\")) {\n    return linkVideo;\n  }\n\n  let checkVid = linkVideo.includes(\"https://www.youtube.com\");\n\n  if (!checkVid) {\n    checkVid = linkVideo.includes(\"youtu.be/\");\n\n    if (checkVid) {\n      return linkVideo;\n    }\n\n    return null;\n  }\n\n  return linkVideo;\n};\n\nconst getTypeCurrent = (type = \"\", options = []) => {\n  for (let i = 0; i < options.length; i++) {\n    if (options[i].value === type) {\n      return i;\n    }\n  }\n\n  return 0;\n};\n\nfunction TabPanel(props) {\n  const {\n    children,\n    value,\n    index,\n    ...other\n  } = props;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    role: \"tabpanel\",\n    hidden: value !== index,\n    id: `simple-tabpanel-${index}`,\n    \"aria-labelledby\": `simple-tab-${index}`,\n    ...other,\n    children: value === index && /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 10\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n}\n\n_c = TabPanel;\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.number.isRequired,\n  value: PropTypes.number.isRequired\n};\n\nfunction a11yProps(index) {\n  return {\n    id: `simple-tab-${index}`,\n    \"aria-controls\": `simple-tabpanel-${index}`\n  };\n}\n\nfunction EditGrammar() {\n  _s();\n\n  var _errors$Title, _errors$Content, _errors$Level, _errors$Video, _errors$Point, _errors$Examples;\n\n  const classes = useStyle();\n  const [resetFlag, setResetFlag] = useState(0);\n  const [value, setValue] = useState(1);\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm({\n    resolver: yupResolver(schema)\n  }); //grammar item\n\n  const [loading, setLoading] = useState(true);\n  const [submitting, setSubmitting] = useState(false);\n  const [more, setMore] = useState(true); // toggle infinite scrolling\n\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\n  const [openDialog, setOpenDialog] = useState(false);\n  const [editItems, setEditItems] = useState(false);\n  const [indexEdit, setIndexEdit] = useState(-1);\n  const [grammarItems, setgrammarItems] = useState([]);\n  const [page, setPage] = useState(1);\n  const totalPage = useRef(0);\n  const [point, setPoint] = useState({\n    Point: \"\",\n    Examples: \"\"\n  });\n\n  const handleChangeDialog = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    setPoint({ ...point,\n      [name]: value\n    });\n  };\n\n  const handleCloseDialog = () => {\n    setOpenDialog(false);\n    setPoint({\n      Point: \"\",\n      Examples: \"\"\n    });\n  };\n\n  const handleOpenDialog = () => {\n    setOpenDialog(true);\n  };\n\n  const handleDialogSubmit = () => {\n    if (point.Point.trim() !== \"\") {\n      if (editItems) {\n        grammarItems[indexEdit] = point;\n        setEditItems(false);\n        setIndexEdit(-1);\n      } else {\n        grammarItems.push(point);\n      }\n    }\n\n    setOpenDialog(false);\n    setPoint({\n      Point: \"\",\n      Examples: \"\"\n    });\n  };\n\n  const onLoadData = () => {\n    if (page < totalPage.current) {\n      setPage(page + 1);\n    } else {\n      setMore(false);\n    }\n  };\n\n  const onClickItem = index => {\n    setPoint(grammarItems[index]);\n    setEditItems(true);\n    setIndexEdit(index);\n    setOpenDialog(true);\n  };\n\n  const deleleGrammarItems = index => {\n    let arr = [];\n\n    for (let i = 0; i < grammarItems.length; i++) {\n      if (i !== index) arr.push(grammarItems[i]);\n    }\n\n    setgrammarItems(arr);\n  }; //grammar item\n\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const defaultImg = \"https://res.cloudinary.com/phongvn2611/image/upload/v1638368033/english/word/default-image_fbmbtn.png\";\n  const [grammarValue, setGrammarValue] = useState(null);\n  const [image, setImage] = useState(defaultImg);\n  const [video, setVideo] = useState(null);\n  const [audio, setAudio] = useState(null);\n  const [linkVideo, setLinkVideo] = useState('');\n  const [script, setScript] = useState(\"\");\n\n  const getScript = spt => {\n    setScript(spt);\n  };\n\n  const {\n    id\n  } = useParams();\n  useEffect(() => {\n    (async function () {\n      var _apiRes$data$Video;\n\n      const apiRes = await grammarApi.getGrammarById(id);\n      setGrammarValue(apiRes.data);\n\n      if ((_apiRes$data$Video = apiRes.data.Video) === null || _apiRes$data$Video === void 0 ? void 0 : _apiRes$data$Video.includes(\"youtube\")) {\n        setLinkVideo(apiRes.data.Video);\n      }\n\n      setScript(apiRes.data.Script);\n      setImage(apiRes.data.Image);\n      setgrammarItems(apiRes.data.Items);\n      setAudio(apiRes.data.Audio);\n    })();\n\n    return () => {};\n  }, [id]);\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setGrammarValue({ ...grammarValue,\n      [name]: value\n    });\n\n    if (name === \"LinkVideo\") {\n      setLinkVideo(value);\n    }\n  };\n\n  const handleChangePicture = e => {\n    e.preventDefault();\n\n    try {\n      const file = e.target.files[0];\n\n      if (!file) {\n        dispatch(setMessage(\"No files were uploaded\", \"error\"));\n      }\n\n      if (file.size / 1024 ** 2 > 2) {\n        dispatch(setMessage(\"Size too large\", \"error\"));\n      }\n\n      convertImageToBase64(file).then(res => {\n        setImage(res);\n      });\n    } catch (err) {\n      throw err;\n    }\n  };\n\n  const handleChangeAudio = e => {\n    e.preventDefault();\n\n    try {\n      const file = e.target.files[0];\n\n      if (!file) {\n        dispatch(setMessage(\"No files were uploaded\", \"error\"));\n      }\n\n      if (file.size / 1024 ** 2 > 2) {\n        dispatch(setMessage(\"Size too large\", \"error\"));\n      }\n\n      convertImageToBase64(file).then(res => {\n        setAudio(res);\n      });\n    } catch (err) {\n      throw err;\n    }\n  };\n\n  const handleChangeVideo = e => {\n    e.preventDefault();\n\n    try {\n      const file = e.target.files[0];\n\n      if (!file) {\n        dispatch(setMessage(\"No files were uploaded\", \"error\"));\n      }\n\n      if (file.size / 1024 ** 2 > 2) {\n        dispatch(setMessage(\"Size too large\", \"error\"));\n      }\n\n      convertImageToBase64(file).then(res => {\n        setVideo(res);\n      });\n    } catch (err) {\n      throw err;\n    }\n  };\n\n  const onSubmit = async () => {\n    try {\n      setSubmitting(true);\n      const {\n        Title,\n        Content,\n        Level,\n        Video\n      } = grammarValue;\n      let dataSend = [];\n      let videoUrl = null;\n\n      if (video === null) {\n        console.log(video);\n        console.log(linkVideo);\n\n        if (linkVideo == null || linkVideo.trim() === \"\") {\n          videoUrl = Video;\n        } else {\n          videoUrl = analysisLinkVideo(linkVideo);\n\n          if (videoUrl == null) {\n            dispatch(setMessage(\"Link video is invalid.\", \"warning\"));\n            setSubmitting(false);\n            return;\n          }\n        }\n\n        dataSend = {\n          Title,\n          Content,\n          Level,\n          Script,\n          Items: grammarItems,\n          Image: image,\n          Video: videoUrl,\n          Audio: audio,\n          Script: script\n        };\n      } else {\n        dataSend = {\n          Title,\n          Content,\n          Level,\n          Script,\n          Items: grammarItems,\n          Image: image,\n          Video: video,\n          Audio: audio,\n          Script: script\n        };\n      }\n\n      const apiRes = await grammarApi.putGrammar(grammarValue._id, dataSend);\n      console.log(apiRes.status);\n\n      if (apiRes.status === 200) {\n        dispatch(setMessage(\"Update grammar successfully\", \"success\"));\n        setSubmitting(false);\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n\n      const message = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Error, can not update grammar.';\n      dispatch(setMessage(message, \"error\"));\n      setSubmitting(false);\n    }\n  };\n\n  const handleChangeValue = (event, newValue) => {\n    setValue(newValue);\n  };\n\n  function handleClickGoBack() {\n    history.push(\"/admin/listening\");\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: classes.title,\n      children: \"Edit grammar in system\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dyno-break\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 7\n    }, this), grammarValue && /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit(onSubmit),\n      autoComplete: \"off\",\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        alignContent: \"center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.avtWrap,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: image ? image : defaultImg,\n            alt: \"\",\n            className: `${classes.avt} w-100 h-100`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `${classes.cameraIconWrap} flex-center`,\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              className: classes.fileInput,\n              onChange: handleChangePicture,\n              accept: \"image/*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        className: classes.grid,\n        container: true,\n        spacing: 3,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 6,\n          lg: 4,\n          children: [/*#__PURE__*/_jsxDEV(InputCustom, {\n            className: \"w-100\",\n            label: \"Title (*)\",\n            error: Boolean(errors.Title),\n            value: grammarValue.Title,\n            inputProps: {\n              autoFocus: true,\n              name: 'Title',\n              ...register('Title')\n            },\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 13\n          }, this), errors.Title && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-error\",\n            children: (_errors$Title = errors.Title) === null || _errors$Title === void 0 ? void 0 : _errors$Title.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 6,\n          lg: 4,\n          children: [/*#__PURE__*/_jsxDEV(InputCustom, {\n            className: \"w-100\",\n            label: \"Content (*)\",\n            error: Boolean(errors.Content),\n            value: grammarValue.Content,\n            inputProps: {\n              name: 'Content',\n              ...register('Content')\n            },\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 13\n          }, this), errors.Content && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-error\",\n            children: (_errors$Content = errors.Content) === null || _errors$Content === void 0 ? void 0 : _errors$Content.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 6,\n          lg: 4,\n          children: [/*#__PURE__*/_jsxDEV(SelectCustom, {\n            className: \"w-100\",\n            label: \"Level (*)\",\n            options: GRAMMAR_LEVEL,\n            error: Boolean(errors.Level),\n            resetFlag: resetFlag,\n            index: getTypeCurrent(grammarValue.Level, GRAMMAR_LEVEL),\n            inputProps: {\n              name: 'Level',\n              ...register('Level')\n            },\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 13\n          }, this), errors.Level && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-error\",\n            children: (_errors$Level = errors.Level) === null || _errors$Level === void 0 ? void 0 : _errors$Level.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            width: \"100%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              borderBottom: 1,\n              borderColor: \"divider\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Tabs, {\n              value: value,\n              onChange: handleChangeValue,\n              \"aria-label\": \"basic tabs example\",\n              indicatorColor: \"primary\",\n              children: [/*#__PURE__*/_jsxDEV(Tab, {\n                label: \"Upload\",\n                ...a11yProps(0)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 446,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(Tab, {\n                label: \"Link\",\n                ...a11yProps(1)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 447,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(Tab, {\n                label: \"Audio\",\n                ...a11yProps(2)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n            value: value,\n            index: 0,\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 6,\n              children: /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                alignContent: \"center\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: classes.avtWrap,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `${classes.cameraIconWrap} flex-center`,\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"file\",\n                      className: classes.fileInput,\n                      onChange: handleChangeVideo,\n                      accept: \"video/*\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 457,\n                      columnNumber: 17\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 456,\n                    columnNumber: 15\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 455,\n                  columnNumber: 15\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 454,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n            value: value,\n            index: 1,\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 6,\n              children: [/*#__PURE__*/_jsxDEV(InputCustom, {\n                className: \"w-100\",\n                label: \"Link Video\",\n                multiline: true,\n                value: linkVideo,\n                endAdornment: /*#__PURE__*/_jsxDEV(InformationTooltip, {\n                  title: \"Input link youtube\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 477,\n                  columnNumber: 17\n                }, this),\n                inputProps: {\n                  name: 'LinkVideo',\n                  ...register('LinkVideo')\n                },\n                onChange: handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 471,\n                columnNumber: 13\n              }, this), errors.Video && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-error\",\n                children: (_errors$Video = errors.Video) === null || _errors$Video === void 0 ? void 0 : _errors$Video.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 487,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n            value: value,\n            index: 2,\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 6,\n              children: /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                alignContent: \"center\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: classes.avtWrap,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `${classes.cameraIconWrap} flex-center`,\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"file\",\n                      className: classes.fileInput,\n                      onChange: handleChangeAudio,\n                      accept: \"audio/*\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 497,\n                      columnNumber: 17\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 496,\n                    columnNumber: 15\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 495,\n                  columnNumber: 15\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 494,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6\",\n          style: {\n            margin: \"auto\",\n            marginTop: \"50px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: \"center\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Rich Text Editor\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 515,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(RichTextEditor, {\n            initialValue: \"\",\n            getValue: getScript\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 517,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 513,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${classes.root2} dyno-container`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-center-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"dyno-title\",\n            children: \"Add Content for grammar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(AddIcon, {\n              className: \"dyno-setting-icon mr-5\",\n              onClick: () => handleOpenDialog()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 528,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n              onClose: handleCloseDialog,\n              open: openDialog,\n              children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n                onClose: handleCloseDialog,\n                children: \"Add point\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 531,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n                dividers: true,\n                children: /*#__PURE__*/_jsxDEV(\"form\", {\n                  noValidate: true,\n                  children: [/*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    children: [/*#__PURE__*/_jsxDEV(InputCustom, {\n                      className: \"w-100\",\n                      label: \"Point\",\n                      value: point.Point,\n                      endAdornment: /*#__PURE__*/_jsxDEV(InformationTooltip, {\n                        title: \"Input value\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 541,\n                        columnNumber: 17\n                      }, this),\n                      error: Boolean(errors.Point),\n                      inputProps: {\n                        name: 'Point',\n                        ...register('Point')\n                      },\n                      onChange: handleChangeDialog\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 536,\n                      columnNumber: 13\n                    }, this), errors.Point && /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-error\",\n                      children: (_errors$Point = errors.Point) === null || _errors$Point === void 0 ? void 0 : _errors$Point.message\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 551,\n                      columnNumber: 15\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 535,\n                    columnNumber: 11\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    children: [/*#__PURE__*/_jsxDEV(InputCustom, {\n                      className: \"w-100\",\n                      label: \"Examples\",\n                      multiline: true,\n                      value: point.Examples,\n                      endAdornment: /*#__PURE__*/_jsxDEV(InformationTooltip, {\n                        title: \"Input value\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 561,\n                        columnNumber: 17\n                      }, this),\n                      error: Boolean(errors.Examples),\n                      inputProps: {\n                        name: 'Examples',\n                        ...register('Examples')\n                      },\n                      onChange: handleChangeDialog\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 555,\n                      columnNumber: 13\n                    }, this), errors.Examples && /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-error\",\n                      children: (_errors$Examples = errors.Examples) === null || _errors$Examples === void 0 ? void 0 : _errors$Examples.message\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 571,\n                      columnNumber: 15\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 554,\n                    columnNumber: 11\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 533,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 532,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  onClick: handleCloseDialog,\n                  color: \"primary\",\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 577,\n                  columnNumber: 9\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: handleDialogSubmit,\n                  color: \"primary\",\n                  autoFocus: true,\n                  children: \"Save\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 578,\n                  columnNumber: 9\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 576,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 530,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 527,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dyno-break\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 585,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.contentWrap,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `${classes.listWrap} w-100`,\n            children: /*#__PURE__*/_jsxDEV(\"ul\", {\n              id: \"dictionaryId\",\n              className: `${classes.list} flex-col w-100`,\n              children: /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: isFirstLoad && /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: grammarItems && grammarItems.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [grammarItems.map((item, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                      className: classes.listItem,\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: `${classes.root3} flex-center-between`,\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-100 flex-center--ver\",\n                          onClick: () => onClickItem(index),\n                          children: /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"ml-8 flex-grow-1\",\n                            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                              className: classes.word,\n                              children: item.Point\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 603,\n                              columnNumber: 33\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 602,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 600,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"flex-center--ver\",\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"mr-5\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 609,\n                            columnNumber: 29\n                          }, this), /*#__PURE__*/_jsxDEV(DeleteIcon, {\n                            className: \"dyno-setting-icon\",\n                            onClick: () => deleleGrammarItems(index)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 611,\n                            columnNumber: 29\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 608,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 599,\n                        columnNumber: 27\n                      }, this)\n                    }, index, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 598,\n                      columnNumber: 25\n                    }, this)), !loading && more && /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n                      onTouchAnchor: onLoadData,\n                      threshold: 1,\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"w-100 t-center\",\n                        children: /*#__PURE__*/_jsxDEV(LoopIcon, {\n                          className: \"ani-spin\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 626,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 625,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 622,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true)\n                }, void 0, false)\n              }, void 0, false)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 590,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 589,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 588,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 524,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dyno-break\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 640,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-end jus-content-end pt-5 w-100\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          className: `${classes.btn} ${classes.btnReset}`,\n          color: \"secondary\",\n          endIcon: /*#__PURE__*/_jsxDEV(ResetIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 646,\n            columnNumber: 22\n          }, this),\n          variant: \"outlined\",\n          disabled: submitting,\n          onClick: () => history.push(\"/admin/grammar\"),\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 643,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          className: `${classes.btn} _btn _btn-primary`,\n          disabled: submitting,\n          endIcon: submitting ? /*#__PURE__*/_jsxDEV(LoopIcon, {\n            className: \"ani-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 658,\n            columnNumber: 28\n          }, this) : /*#__PURE__*/_jsxDEV(SaveIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 658,\n            columnNumber: 64\n          }, this),\n          variant: \"contained\",\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 653,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 642,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 356,\n    columnNumber: 5\n  }, this);\n}\n\n_s(EditGrammar, \"Ev6DyjHjXYbpkpkt1hPPXigZcNQ=\", false, function () {\n  return [useStyle, useForm, useDispatch, useHistory, useParams];\n});\n\n_c2 = EditGrammar;\nEditGrammar.propTypes = {\n  onSubmitForm: PropTypes.func,\n  submitting: PropTypes.bool\n};\nEditGrammar.defaultProps = {\n  onSubmitForm: function () {},\n  submitting: false\n};\nexport default EditGrammar;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TabPanel\");\n$RefreshReg$(_c2, \"EditGrammar\");","map":{"version":3,"sources":["E:/TLCN/LearningEnglishWebsite/frontend/src/components/GrammarAdmin/EditGrammar/index.js"],"names":["yupResolver","Button","Grid","LoopIcon","ResetIcon","SaveIcon","InputCustom","SelectCustom","PropTypes","React","useRef","useState","useEffect","useForm","yup","InformationTooltip","useStyle","Box","Tabs","Tab","useHistory","useDispatch","setMessage","convertImageToBase64","GRAMMAR_LEVEL","Dialog","DialogContent","DialogTitle","DialogActions","AddIcon","InfiniteScroll","grammarApi","DeleteIcon","useParams","RichTextEditor","schema","object","shape","Title","string","trim","required","Content","Level","oneOf","map","i","value","LinkVideo","Script","analysisLinkVideo","linkVideo","includes","checkVid","getTypeCurrent","type","options","length","TabPanel","props","children","index","other","p","propTypes","node","number","isRequired","a11yProps","id","EditGrammar","classes","resetFlag","setResetFlag","setValue","register","handleSubmit","formState","errors","resolver","loading","setLoading","submitting","setSubmitting","more","setMore","isFirstLoad","setIsFirstLoad","openDialog","setOpenDialog","editItems","setEditItems","indexEdit","setIndexEdit","grammarItems","setgrammarItems","page","setPage","totalPage","point","setPoint","Point","Examples","handleChangeDialog","event","name","target","handleCloseDialog","handleOpenDialog","handleDialogSubmit","push","onLoadData","current","onClickItem","deleleGrammarItems","arr","dispatch","history","defaultImg","grammarValue","setGrammarValue","image","setImage","video","setVideo","audio","setAudio","setLinkVideo","script","setScript","getScript","spt","apiRes","getGrammarById","data","Video","Image","Items","Audio","handleChange","e","handleChangePicture","preventDefault","file","files","size","then","res","err","handleChangeAudio","handleChangeVideo","onSubmit","dataSend","videoUrl","console","log","putGrammar","_id","status","error","message","response","handleChangeValue","newValue","handleClickGoBack","title","avtWrap","avt","cameraIconWrap","fileInput","grid","Boolean","autoFocus","width","borderBottom","borderColor","margin","marginTop","textAlign","root2","contentWrap","listWrap","list","item","listItem","root3","word","btn","btnReset","onSubmitForm","func","bool","defaultProps"],"mappings":"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","sourcesContent":["import { yupResolver } from '@hookform/resolvers/yup';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport LoopIcon from '@material-ui/icons/Loop';\nimport ResetIcon from '@material-ui/icons/RotateLeft';\nimport SaveIcon from '@material-ui/icons/Save';\nimport InputCustom from 'components/UI/InputCustom';\nimport SelectCustom from 'components/UI/SelectCustom';\nimport PropTypes from 'prop-types';\nimport React, { useRef, useState, useEffect } from 'react';\nimport { useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport InformationTooltip from './InformationTooltip';\nimport useStyle from './style';\nimport Box from \"@material-ui/core/Box\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport { useHistory } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { setMessage } from \"redux/actions/messageAction\";\nimport { convertImageToBase64 } from 'helper';\nimport { GRAMMAR_LEVEL } from 'constants/grammarLevels';\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport { DialogActions } from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\nimport InfiniteScroll from 'components/UI/InfiniteScroll';\nimport grammarApi from 'apis/grammarApi';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { useParams } from \"react-router-dom\";\nimport RichTextEditor from 'components/UI/RichTextEditor';\n\nconst schema = yup.object().shape({\n  Title: yup\n    .string()\n    .trim()\n    .required('Input value'),\n  Content: yup\n    .string()\n    .required('Input value'),\n  Level: yup\n    .string()\n    .required('Select one')\n    .oneOf(GRAMMAR_LEVEL.map((i) => i.value)),\n  LinkVideo: yup\n    .string(),\n  Script: yup\n    .string(),\n  \n});\n\nconst analysisLinkVideo = (linkVideo = '') => {\n  if (typeof linkVideo !== 'string' || linkVideo === '') {\n    return null;\n  }\n  if(linkVideo.includes(\"embed\")){\n    return linkVideo;\n  }\n\n  let checkVid = linkVideo.includes(\"https://www.youtube.com\")\n  if(!checkVid){\n      checkVid =linkVideo.includes(\"youtu.be/\")\n      if(checkVid)\n      {\n        return linkVideo;\n      }\n      return null;\n  }\n  return linkVideo;\n};\n\nconst getTypeCurrent = (type = \"\", options = []) => {\n  for (let i = 0; i < options.length; i++) {\n    if (options[i].value === type) {\n      return i;\n    }\n  }\n  return 0;\n};\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box sx={{ p: 3 }}>\n         <Grid>{children}</Grid>\n        </Box>\n      )}\n    </div>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.number.isRequired,\n  value: PropTypes.number.isRequired,\n};\n\nfunction a11yProps(index) {\n  return {\n    id: `simple-tab-${index}`,\n    \"aria-controls\": `simple-tabpanel-${index}`,\n  };\n}\n\nfunction EditGrammar() {\n  const classes = useStyle();\n  const [resetFlag, setResetFlag] = useState(0);\n  const [value, setValue] = useState(1);\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm({\n    resolver: yupResolver(schema),\n  });\n//grammar item\n  const [loading, setLoading] = useState(true);\n  const [submitting, setSubmitting] = useState(false);\n  const [more, setMore] = useState(true); // toggle infinite scrolling\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\n  const [openDialog, setOpenDialog] = useState(false);\n  const [editItems, setEditItems] = useState(false);\n  const [indexEdit, setIndexEdit] = useState(-1);\n  const [grammarItems, setgrammarItems] = useState([]);\n  const [page, setPage] = useState(1);\n  const totalPage = useRef(0);\n\n  const [point, setPoint] = useState({\n    Point: \"\",\n    Examples: \"\",\n  });\n  const handleChangeDialog = (event) => {\n    const {name, value} = event.target;\n    setPoint({...point, [name]: value});\n  };\n\n  const handleCloseDialog = () => {\n    setOpenDialog(false)\n    setPoint({Point: \"\", Examples: \"\"})\n  };\n\n  const handleOpenDialog = () => {\n    setOpenDialog(true)\n\n  };\n\n  const handleDialogSubmit = () => {\n    if(point.Point.trim() !==\"\" ){\n    if(editItems){\n     grammarItems[indexEdit]=point;\n     setEditItems(false);\n     setIndexEdit(-1);\n    }\n    else{\n      grammarItems.push(point)\n    } \n  }  \n    setOpenDialog(false) \n    setPoint({Point: \"\", Examples: \"\"})\n  };\n\n  const onLoadData = () => {\n    if (page < totalPage.current) {\n      setPage(page + 1);\n    } else {\n      setMore(false);\n    }\n  };\n\n  const onClickItem = (index) => {\n    setPoint(grammarItems[index]);\n    setEditItems(true);\n    setIndexEdit(index);\n    setOpenDialog(true);\n  };\n  const deleleGrammarItems = (index) => {\n    let arr = [];\n    for(let i=0; i<grammarItems.length; i++)\n    {\n      if(i !== index)\n      arr.push(grammarItems[i])\n    }\n    setgrammarItems(arr);\n  };\n//grammar item\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const defaultImg =\n  \"https://res.cloudinary.com/phongvn2611/image/upload/v1638368033/english/word/default-image_fbmbtn.png\";\n  const [grammarValue, setGrammarValue] = useState(null);\n  const [image, setImage] = useState(defaultImg);\n  const [video, setVideo] = useState(null);\n  const [audio, setAudio] = useState(null);\n  const [linkVideo, setLinkVideo] = useState('');\n  const [script, setScript] = useState(\"\");\n  const getScript = (spt) => {\n    setScript(spt);\n  };\n\n  const { id } = useParams();\n\n  useEffect(() => {\n    (async function () {\n      const apiRes = await grammarApi.getGrammarById(id);\n      setGrammarValue(apiRes.data);\n      if(apiRes.data.Video?.includes(\"youtube\")){\n        setLinkVideo(apiRes.data.Video);\n      }\n      setScript(apiRes.data.Script)\n      setImage(apiRes.data.Image);\n      setgrammarItems(apiRes.data.Items);\n      setAudio(apiRes.data.Audio)\n    })();\n    return () => {};\n  }, [id]);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setGrammarValue({ ...grammarValue, [name]: value });\n    if(name ===\"LinkVideo\"){\n      setLinkVideo(value)\n    }\n  }\n\n\n  const handleChangePicture = (e) => {\n    e.preventDefault();\n    try {\n      const file = e.target.files[0];\n      if (!file) {\n        dispatch(setMessage(\"No files were uploaded\", \"error\"));\n      }\n      if (file.size / 1024 ** 2 > 2) {\n        dispatch(setMessage(\"Size too large\", \"error\"));\n      }\n      convertImageToBase64(file).then(res => {\n        setImage(res);\n      });\n      \n    } catch (err) {\n      throw err;\n    }\n  };\n\n  const handleChangeAudio = (e) => {\n    e.preventDefault();\n    try {\n      const file = e.target.files[0];\n      if (!file) {\n        dispatch(setMessage(\"No files were uploaded\", \"error\"));\n      }\n      if (file.size / 1024 ** 2 > 2) {\n        dispatch(setMessage(\"Size too large\", \"error\"));\n      }\n      convertImageToBase64(file).then(res => {\n        setAudio(res);\n      });\n      \n    } catch (err) {\n      throw err;\n    }\n  };\n\n  const handleChangeVideo = (e) => {\n    e.preventDefault();\n    try {\n      const file = e.target.files[0];\n      if (!file) {\n        dispatch(setMessage(\"No files were uploaded\", \"error\"));\n      }\n      if (file.size / 1024 ** 2 > 2) {\n        dispatch(setMessage(\"Size too large\", \"error\"));\n      }\n     convertImageToBase64(file).then(res => {\n        setVideo(res);\n      });\n      \n    } catch (err) {\n      throw err;\n    }\n  };\n\n  const onSubmit = async () => {\n    try {\n      setSubmitting(true);\n      const {Title, Content, Level, Video} = grammarValue;\n      let dataSend = [];\n      let videoUrl= null;\n      if(video === null){\n        console.log(video)\n        console.log(linkVideo)\n        if(linkVideo== null || linkVideo.trim() === \"\"){\n          videoUrl = Video;\n        }\n        else{\n          videoUrl = analysisLinkVideo(linkVideo);\n          if (videoUrl==null) {\n            dispatch(setMessage(\"Link video is invalid.\", \"warning\"));\n            setSubmitting(false);\n            return;\n          }\n        }\n        dataSend ={\n          Title, Content, Level, Script,\n          Items: grammarItems,\n          Image: image,\n          Video: videoUrl,\n          Audio: audio,\n          Script: script,\n        };\n      }\n      else{\n        dataSend ={\n          Title, Content, Level, Script,\n          Items: grammarItems,\n          Image: image,\n          Video: video,\n          Audio: audio,\n          Script: script,\n        };  \n      } \n      const apiRes = await grammarApi.putGrammar(grammarValue._id, dataSend);\n      console.log(apiRes.status)\n      if (apiRes.status === 200) {\n        dispatch(setMessage(\"Update grammar successfully\", \"success\"));\n        setSubmitting(false);\n     }\n\n    } catch (error) {\n      const message =  error.response?.data?.message ||\n      'Error, can not update grammar.';\n        dispatch(setMessage(message, \"error\"));\n      setSubmitting(false);\n    }\n  }\n\n  const handleChangeValue = (event, newValue) => {\n    setValue(newValue);\n  };\n\n  function handleClickGoBack() {\n    history.push(\"/admin/listening\");\n  }\n\n  return (\n    <div >\n      <h1 className={classes.title}>Edit grammar in system</h1>\n      <div className=\"dyno-break\"></div>\n\n      {grammarValue && (\n      <form onSubmit={handleSubmit(onSubmit)} autoComplete=\"off\">\n      <Grid container alignContent=\"center\">\n          <div className={classes.avtWrap}>\n            <img\n              src={image ? image : defaultImg}\n              alt=\"\"\n              className={`${classes.avt} w-100 h-100`}\n            />\n            <div className={`${classes.cameraIconWrap} flex-center`}>\n              <input\n                type=\"file\"\n                className={classes.fileInput}\n                onChange={handleChangePicture}\n                accept=\"image/*\"\n              />\n            </div>\n          </div>\n        </Grid>\n        <Grid className={classes.grid} container spacing={3}>\n          {/* Title */}\n          <Grid item xs={12} md={6} lg={4}>\n            <InputCustom\n              className=\"w-100\"\n              label=\"Title (*)\"\n              error={Boolean(errors.Title)}\n              value={grammarValue.Title}\n              inputProps={{\n                autoFocus: true,\n                name: 'Title',\n                ...register('Title'),\n              }}\n              onChange={handleChange}\n            />\n            {errors.Title && (\n              <p className=\"text-error\">{errors.Title?.message}</p>\n            )}\n          </Grid>\n\n          {/* Content */}\n          <Grid item xs={12} md={6} lg={4}>\n            <InputCustom\n              className=\"w-100\"\n              label=\"Content (*)\"\n              error={Boolean(errors.Content)}\n              value={grammarValue.Content}\n              inputProps={{\n                name: 'Content',\n                ...register('Content'),\n              }}\n              onChange={handleChange}\n            />\n            {errors.Content && (\n              <p className=\"text-error\">{errors.Content?.message}</p>\n            )}\n          </Grid>\n\n          {/* Level */}\n          <Grid item xs={12} md={6} lg={4}>\n            <SelectCustom\n              className=\"w-100\"\n              label=\"Level (*)\"\n              options={GRAMMAR_LEVEL}\n              error={Boolean(errors.Level)}\n              resetFlag={resetFlag}\n              index={getTypeCurrent(grammarValue.Level, GRAMMAR_LEVEL)}\n              inputProps={{\n                name: 'Level',\n                ...register('Level'),\n              }}\n              onChange={handleChange}\n            />\n            {errors.Level && (\n              <p className=\"text-error\">{errors.Level?.message}</p>\n            )}\n          </Grid>\n          {/* Audio */}\n\n          <Box sx={{ width: \"100%\" }}>\n          <Box sx={{ borderBottom: 1, borderColor: \"divider\" }}>\n            <Tabs\n              value={value}\n              onChange={handleChangeValue}\n              aria-label=\"basic tabs example\"\n              indicatorColor=\"primary\"\n            >\n              <Tab label=\"Upload\" {...a11yProps(0)} />\n              <Tab label=\"Link\" {...a11yProps(1)} />\n              <Tab label=\"Audio\" {...a11yProps(2)} />\n            </Tabs>\n          </Box>\n          <TabPanel value={value} index={0}>\n                   {/* Video */}\n            <Grid item xs={6}>\n              <Grid container alignContent=\"center\">\n              <div className={classes.avtWrap}>\n              <div className={`${classes.cameraIconWrap} flex-center`}>\n                <input\n                  type=\"file\"\n                  className={classes.fileInput}\n                  onChange={handleChangeVideo}\n                  accept=\"video/*\"\n                />\n              </div>\n            </div>\n              </Grid>\n          </Grid>\n          </TabPanel>\n\n          <TabPanel value={value} index={1}>\n          <Grid item xs={6} >\n            <InputCustom\n              className=\"w-100\"\n              label=\"Link Video\"\n              multiline\n              value={linkVideo}\n              endAdornment={\n                <InformationTooltip title=\"Input link youtube\" />\n              }\n              inputProps={{\n                name: 'LinkVideo',\n                ...register('LinkVideo'),\n              }}\n              onChange={handleChange}\n            />\n\n            {errors.Video && (\n              <p className=\"text-error\">{errors.Video?.message}</p>\n            )}\n          </Grid>\n          </TabPanel>\n          <TabPanel value={value} index={2}>\n                   {/* Audio */}\n            <Grid item xs={6}>\n              <Grid container alignContent=\"center\">\n              <div className={classes.avtWrap}>\n              <div className={`${classes.cameraIconWrap} flex-center`}>\n                <input\n                  type=\"file\"\n                  className={classes.fileInput}\n                  onChange={handleChangeAudio}\n                  accept=\"audio/*\"\n                />\n              </div>\n            </div>\n              </Grid>\n          </Grid>\n          </TabPanel>\n        </Box>\n        </Grid>\n\n      {/* Script */}\n      <div className=\"row\">\n          <div className=\"col-md-6\" style={{ margin: \"auto\", marginTop: \"50px\" }}>\n            <div style={{ textAlign: \"center\" }}>\n              <h3>Rich Text Editor</h3>\n            </div>\n            <RichTextEditor initialValue=\"\" getValue={getScript} />\n           \n          </div>\n        </div> \n\n\n        {/* Grammar Item */}\n        <div className={`${classes.root2} dyno-container`}>\n      <div className=\"flex-center-between\">\n        <h1 className=\"dyno-title\">Add Content for grammar</h1>\n        <div>\n          <AddIcon className=\"dyno-setting-icon mr-5\" onClick={() => handleOpenDialog()}/>\n                {/* Dialog */}\n          <Dialog onClose={handleCloseDialog} open={openDialog}>\n        <DialogTitle onClose={handleCloseDialog}>Add point</DialogTitle>\n        <DialogContent dividers>\n          <form noValidate>\n            {/* Point */}\n          <Grid item xs={12}>\n            <InputCustom\n              className=\"w-100\"\n              label=\"Point\"\n              value={point.Point}\n              endAdornment={\n                <InformationTooltip title=\"Input value\" />\n              }\n              error={Boolean(errors.Point)}\n              inputProps={{\n                name: 'Point',\n                ...register('Point'),\n              }}\n              onChange={handleChangeDialog}\n            />\n               {errors.Point && (\n              <p className=\"text-error\">{errors.Point?.message}</p>\n            )}\n          </Grid>\n          <Grid item xs={12}>\n            <InputCustom\n              className=\"w-100\"\n              label=\"Examples\"\n              multiline\n              value={point.Examples}\n              endAdornment={\n                <InformationTooltip title=\"Input value\" />\n              }\n              error={Boolean(errors.Examples)}\n              inputProps={{\n                name: 'Examples',\n                ...register('Examples'),\n              }}\n              onChange={handleChangeDialog}\n            />\n               {errors.Examples && (\n              <p className=\"text-error\">{errors.Examples?.message}</p>\n            )}\n          </Grid> \n        </form>\n        </DialogContent>\n        <DialogActions>\n        <Button onClick={handleCloseDialog} color=\"primary\">Cancel</Button>\n        <Button onClick={handleDialogSubmit} color=\"primary\" autoFocus>Save</Button>\n        </DialogActions>\n      </Dialog>\n       {/* Dialog */}\n\n        </div>\n      </div>\n      <div className=\"dyno-break\"></div>\n\n      {/* list content */}\n      <div className={classes.contentWrap}>\n        <div className={`${classes.listWrap} w-100`}>\n          <ul id=\"dictionaryId\" className={`${classes.list} flex-col w-100`}>\n          <>\n              {isFirstLoad && (\n                <>\n                  {grammarItems && grammarItems.length > 0 && (\n                    <>\n                      {/* render list */}\n                      {grammarItems.map((item, index) => (\n                        <li className={classes.listItem} key={index}>\n                          <div className={`${classes.root3} flex-center-between`}>\n                            <div \n                              className=\"w-100 flex-center--ver\" onClick={() => onClickItem(index)}>\n                              <div className=\"ml-8 flex-grow-1\">\n                                <h3 className={classes.word}>\n                               {item.Point}            \n                                </h3>\n                              </div>\n                            </div>\n                            <div className=\"flex-center--ver\">\n                            <div className=\"mr-5\">\n                            </div>\n                            <DeleteIcon className=\"dyno-setting-icon\" \n                            onClick={() => deleleGrammarItems(index)}\n                            />\n\n                          </div>\n                          </div>\n                        </li>\n                      ))}\n\n                      {/* infinite scrolling */}\n                      {!loading && more && (\n                        <InfiniteScroll\n                          onTouchAnchor={onLoadData}\n                          threshold={1}>\n                          <div className=\"w-100 t-center\">\n                            <LoopIcon className=\"ani-spin\" />\n                          </div>\n                        </InfiniteScroll>\n                      )}\n                    </>\n                  )}\n                </>\n              )}\n            </>\n          </ul>\n        </div>\n      </div>\n    </div>\n\n        <div className=\"dyno-break\"></div>\n        {/* button group */}\n        <div className=\"d-flex flex-end jus-content-end pt-5 w-100\">\n          <Button\n            className={`${classes.btn} ${classes.btnReset}`}\n            color=\"secondary\"\n            endIcon={<ResetIcon />}\n            variant=\"outlined\"\n            disabled={submitting}\n            onClick={() => history.push(\"/admin/grammar\")}\n           >\n            Cancel\n          </Button>\n          <Button\n            type=\"submit\"\n            className={`${classes.btn} _btn _btn-primary`}\n            disabled={submitting}\n            endIcon={\n              submitting ? <LoopIcon className=\"ani-spin\" /> : <SaveIcon />\n            }\n            variant=\"contained\">\n            Edit\n          </Button>\n        </div>\n      </form>\n      )}\n    </div>\n  );\n}\n\nEditGrammar.propTypes = {\n  onSubmitForm: PropTypes.func,\n  submitting: PropTypes.bool,\n};\n\nEditGrammar.defaultProps = {\n  onSubmitForm: function () {},\n  submitting: false,\n};\n\nexport default EditGrammar;\n"]},"metadata":{},"sourceType":"module"}