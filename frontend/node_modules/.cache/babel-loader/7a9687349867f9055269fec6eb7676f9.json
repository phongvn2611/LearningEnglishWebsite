{"ast":null,"code":"var _jsxFileName = \"E:\\\\TLCN\\\\LearningEnglishWebsite\\\\frontend\\\\src\\\\components\\\\ListeningAdmin\\\\EditListening\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport LoopIcon from \"@material-ui/icons/Loop\";\nimport ResetIcon from \"@material-ui/icons/RotateLeft\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport listeningApi from \"apis/listeningApi\";\nimport InputCustom from \"components/UI/InputCustom\";\nimport SelectCustom from \"components/UI/SelectCustom\";\nimport { LISTEN_TOPIC } from \"constants/listeningTopics\";\nimport PropTypes from \"prop-types\";\nimport React, { useState, useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { setMessage } from \"redux/actions/messageAction\";\nimport * as yup from \"yup\";\nimport InformationTooltip from \"./../CreateListen/InformationTooltip\";\nimport useStyle from \"./style\";\nimport { useParams } from \"react-router-dom\";\nimport { convertImageToBase64 } from \"helper/index\";\nimport useTitle from \"hooks/useTitle\";\nimport Box from \"@material-ui/core/Box\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport { useHistory } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport RichTextEditor from 'components/UI/RichTextEditor';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst schema = yup.object().shape({\n  Name: yup.string().trim().required(\"Input value\"),\n  Description: yup.string().required(\"Input value\"),\n  Topic: yup.string().required(\"Select one\").oneOf(LISTEN_TOPIC.map(i => i.value)),\n  LinkVideo: yup.string(),\n  Script: yup.string()\n});\n\nconst analysisLinkVideo = (linkVideo = \"\") => {\n  if (typeof linkVideo !== \"string\" || linkVideo === \"\") {\n    return null;\n  }\n\n  if (linkVideo.includes(\"embed\")) {\n    return linkVideo;\n  }\n\n  let checkVid = linkVideo.includes(\"https://www.youtube.com\");\n\n  if (!checkVid) {\n    checkVid = linkVideo.includes(\"youtu.be/\");\n\n    if (checkVid) {\n      return linkVideo;\n    }\n\n    return null;\n  }\n\n  return linkVideo;\n};\n\nconst getTypeCurrent = (type = \"\", options = []) => {\n  for (let i = 0; i < options.length; i++) {\n    if (options[i].value === type) {\n      return i;\n    }\n  }\n\n  return 0;\n};\n\nfunction TabPanel(props) {\n  const {\n    children,\n    value,\n    index,\n    ...other\n  } = props;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    role: \"tabpanel\",\n    hidden: value !== index,\n    id: `simple-tabpanel-${index}`,\n    \"aria-labelledby\": `simple-tab-${index}`,\n    ...other,\n    children: value === index && /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n\n_c = TabPanel;\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.number.isRequired,\n  value: PropTypes.number.isRequired\n};\n\nfunction a11yProps(index) {\n  return {\n    id: `simple-tab-${index}`,\n    \"aria-controls\": `simple-tabpanel-${index}`\n  };\n}\n\nfunction EditListening() {\n  _s();\n\n  var _errors$Name, _errors$Description, _errors$Topic, _errors$Video, _errors$Script;\n\n  useTitle(\"Edit Listening\");\n  const classes = useStyle();\n  const [value, setValue] = useState(1);\n  const [submitting, setSubmitting] = useState(false);\n  const defaultImg = \"https://res.cloudinary.com/phongvn2611/image/upload/v1638368033/english/word/default-image_fbmbtn.png\";\n  const history = useHistory();\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n  const dispatch = useDispatch();\n  const [listenValue, setListenValue] = useState(null);\n  const [image, setImage] = useState(defaultImg);\n  const [video, setVideo] = useState(null);\n  const [linkVideo, setLinkVideo] = useState(\"\");\n  const [script, setScript] = useState(\"\");\n\n  const handleChangePicture = e => {\n    e.preventDefault();\n\n    try {\n      const file = e.target.files[0];\n\n      if (!file) {\n        dispatch(setMessage(\"No files were uploaded\", \"error\"));\n      }\n\n      if (file.size / 1024 ** 2 > 2) {\n        dispatch(setMessage(\"Size too large\", \"error\"));\n      }\n\n      convertImageToBase64(file).then(res => {\n        setImage(res);\n      });\n    } catch (err) {\n      throw err;\n    }\n  };\n\n  const handleChangeVideo = e => {\n    e.preventDefault();\n\n    try {\n      const file = e.target.files[0]; // console.log(file)\n\n      if (!file) {\n        dispatch(setMessage(\"No files were uploaded\", \"error\"));\n      }\n\n      if (file.size / 1024 ** 2 > 2) {\n        dispatch(setMessage(\"Size too large\", \"error\"));\n      }\n\n      convertImageToBase64(file).then(res => {\n        setVideo(res);\n        console.log(res);\n      });\n    } catch (err) {\n      throw err;\n    }\n  };\n\n  const {\n    id\n  } = useParams();\n  useEffect(() => {\n    (async function () {\n      const apiRes = await listeningApi.getListenById(id);\n      setListenValue(apiRes.data.listen);\n\n      if (apiRes.data.listen.Video.includes(\"youtube\")) {\n        setLinkVideo(apiRes.data.listen.Video);\n      } // else{\n      //   setVideo(apiRes.data.listen.Video);\n      // }\n\n\n      setImage(apiRes.data.listen.Image);\n    })();\n\n    return () => {};\n  }, [id]);\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setListenValue({ ...listenValue,\n      [name]: value\n    });\n\n    if (name === \"LinkVideo\") {\n      setLinkVideo(value);\n    }\n  };\n\n  const handleChangeValue = (event, newValue) => {\n    setValue(newValue);\n  };\n\n  const onSubmit = async () => {\n    try {\n      setSubmitting(true);\n      const {\n        Name,\n        Topic,\n        Description,\n        Script,\n        Video\n      } = listenValue;\n      let dataSend = [];\n      let videoUrl = null;\n\n      if (video == null) {\n        console.log(video);\n        console.log(linkVideo);\n\n        if (linkVideo == null || linkVideo.trim() === \"\") {\n          videoUrl = Video;\n        } else {\n          videoUrl = analysisLinkVideo(linkVideo);\n\n          if (videoUrl == null) {\n            dispatch(setMessage(\"Link video is invalid.\", \"warning\"));\n            setSubmitting(false);\n            return;\n          }\n        }\n\n        console.log(videoUrl);\n        dataSend = {\n          Name,\n          Topic,\n          Description,\n          Script,\n          Image: image,\n          Video: videoUrl\n        };\n      } else {\n        dataSend = {\n          Name,\n          Topic,\n          Description,\n          Script,\n          Image: image,\n          Video: video\n        };\n      }\n\n      console.log(dataSend);\n      const apiRes = await listeningApi.putListen(listenValue._id, dataSend);\n      console.log(apiRes.data);\n\n      if (apiRes.status === 200) {\n        dispatch(setMessage(\"Update listening successfully\", \"success\"));\n        setSubmitting(false);\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n\n      const message = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"Error, can not create listening.\";\n      dispatch(setMessage(message, \"error\"));\n      setSubmitting(false);\n    }\n  };\n\n  function handleClickGoBack() {\n    history.push(\"/admin/listening\");\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: classes.title,\n      children: \"Edit Listening\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dyno-break\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }, this), listenValue && /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit(onSubmit),\n      autoComplete: \"off\",\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        alignContent: \"center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.avtWrap,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: image ? image : defaultImg,\n            alt: \"\",\n            className: `${classes.avt} w-100 h-100`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `${classes.cameraIconWrap} flex-center`,\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              className: classes.fileInput,\n              onChange: handleChangePicture,\n              accept: \"image/*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        className: classes.grid,\n        container: true,\n        spacing: 3,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 6,\n          lg: 4,\n          children: [/*#__PURE__*/_jsxDEV(InputCustom, {\n            className: \"w-100\",\n            label: \"Name\",\n            value: listenValue.Name,\n            error: Boolean(errors.Name),\n            inputProps: {\n              name: \"Name\",\n              ...register(\"Name\")\n            },\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 15\n          }, this), errors.Name && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-error\",\n            children: (_errors$Name = errors.Name) === null || _errors$Name === void 0 ? void 0 : _errors$Name.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 6,\n          lg: 4,\n          children: [/*#__PURE__*/_jsxDEV(InputCustom, {\n            className: \"w-100\",\n            label: \"Description\",\n            value: listenValue.Description,\n            error: Boolean(errors.Description),\n            inputProps: {\n              name: \"Description\",\n              ...register(\"Description\")\n            },\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 15\n          }, this), errors.Description && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-error\",\n            children: (_errors$Description = errors.Description) === null || _errors$Description === void 0 ? void 0 : _errors$Description.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 6,\n          lg: 4,\n          children: [/*#__PURE__*/_jsxDEV(SelectCustom, {\n            className: \"w-100\",\n            label: \"Topic (*)\",\n            options: LISTEN_TOPIC,\n            error: Boolean(errors.LISTEN_TOPIC),\n            index: getTypeCurrent(listenValue.Topic, LISTEN_TOPIC),\n            inputProps: {\n              name: \"Topic\",\n              ...register(\"Topic\")\n            },\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 15\n          }, this), errors.Topic && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-error\",\n            children: (_errors$Topic = errors.Topic) === null || _errors$Topic === void 0 ? void 0 : _errors$Topic.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            width: \"100%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              borderBottom: 1,\n              borderColor: \"divider\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Tabs, {\n              value: value,\n              onChange: handleChangeValue,\n              \"aria-label\": \"basic tabs example\",\n              indicatorColor: \"primary\",\n              children: [/*#__PURE__*/_jsxDEV(Tab, {\n                label: \"Upload\",\n                ...a11yProps(0)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Tab, {\n                label: \"Link\",\n                ...a11yProps(1)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n            value: value,\n            index: 0,\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 6,\n              children: /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                alignContent: \"center\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: classes.avtWrap,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `${classes.cameraIconWrap} flex-center`,\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"file\",\n                      value: listenValue.Video.fileInput,\n                      className: classes.fileInput,\n                      onChange: handleChangeVideo,\n                      accept: \"video/*\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 339,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 338,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 337,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n            value: value,\n            index: 1,\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 6,\n              children: [/*#__PURE__*/_jsxDEV(InputCustom, {\n                className: \"w-100\",\n                label: \"Link Video\",\n                multiline: true,\n                value: linkVideo,\n                endAdornment: /*#__PURE__*/_jsxDEV(InformationTooltip, {\n                  title: \"Input link youtube\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 360,\n                  columnNumber: 23\n                }, this),\n                inputProps: {\n                  name: \"LinkVideo\",\n                  ...register(\"LinkVideo\")\n                },\n                onChange: handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 354,\n                columnNumber: 19\n              }, this), errors.Video && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-error\",\n                children: (_errors$Video = errors.Video) === null || _errors$Video === void 0 ? void 0 : _errors$Video.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 6,\n          lg: 4,\n          children: [/*#__PURE__*/_jsxDEV(InputCustom, {\n            className: \"w-100\",\n            label: \"Script\",\n            value: listenValue.Script,\n            multiline: true,\n            endAdornment: /*#__PURE__*/_jsxDEV(InformationTooltip, {\n              title: \"Th\\xEAm c\\xE1c c\\xE2u v\\xED d\\u1EE5 cho t\\u1EEB tr\\xEAn. \\u0110\\u1EA3m b\\u1EA3o c\\xF3 s\\u1EF1 xu\\u1EA5t hi\\u1EC7n c\\u1EE7a t\\u1EEB \\u0111\\xF3 trong c\\xE2u. B\\u1EA1n c\\xF3 th\\u1EC3 th\\xEAm nhi\\u1EC1u c\\xE2u b\\u1EB1ng c\\xE1ch xu\\u1ED1ng d\\xF2ng.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 19\n            }, this),\n            error: Boolean(errors.Script),\n            inputProps: {\n              name: \"Script\",\n              ...register(\"Script\")\n            },\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 15\n          }, this), errors.Script && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-error\",\n            children: (_errors$Script = errors.Script) === null || _errors$Script === void 0 ? void 0 : _errors$Script.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dyno-break\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-end jus-content-end pt-5 w-100\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          className: `${classes.btn} ${classes.btnReset}`,\n          color: \"secondary\",\n          endIcon: /*#__PURE__*/_jsxDEV(ResetIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 24\n          }, this),\n          variant: \"outlined\" // disabled={}\n          ,\n          onClick: () => handleClickGoBack(),\n          children: \"Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          className: `${classes.btn} _btn _btn-primary`,\n          disabled: submitting,\n          endIcon: submitting ? /*#__PURE__*/_jsxDEV(LoopIcon, {\n            className: \"ani-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 30\n          }, this) : /*#__PURE__*/_jsxDEV(SaveIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 66\n          }, this),\n          variant: \"contained\",\n          onClick: () => onSubmit(),\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 247,\n    columnNumber: 5\n  }, this);\n}\n\n_s(EditListening, \"FHGou3hxWXni/1dA8XVVEGnRdKE=\", false, function () {\n  return [useTitle, useStyle, useHistory, useForm, useDispatch, useParams];\n});\n\n_c2 = EditListening;\nEditListening.propTypes = {\n  onSubmitForm: PropTypes.func,\n  submitting: PropTypes.bool\n};\nEditListening.defaultProps = {\n  onSubmitForm: function () {},\n  submitting: false\n};\nexport default EditListening;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TabPanel\");\n$RefreshReg$(_c2, \"EditListening\");","map":{"version":3,"sources":["E:/TLCN/LearningEnglishWebsite/frontend/src/components/ListeningAdmin/EditListening/index.js"],"names":["yupResolver","Button","Grid","LoopIcon","ResetIcon","SaveIcon","listeningApi","InputCustom","SelectCustom","LISTEN_TOPIC","PropTypes","React","useState","useEffect","useForm","setMessage","yup","InformationTooltip","useStyle","useParams","convertImageToBase64","useTitle","Box","Tabs","Tab","useHistory","useDispatch","RichTextEditor","schema","object","shape","Name","string","trim","required","Description","Topic","oneOf","map","i","value","LinkVideo","Script","analysisLinkVideo","linkVideo","includes","checkVid","getTypeCurrent","type","options","length","TabPanel","props","children","index","other","p","propTypes","node","number","isRequired","a11yProps","id","EditListening","classes","setValue","submitting","setSubmitting","defaultImg","history","register","handleSubmit","formState","errors","resolver","dispatch","listenValue","setListenValue","image","setImage","video","setVideo","setLinkVideo","script","setScript","handleChangePicture","e","preventDefault","file","target","files","size","then","res","err","handleChangeVideo","console","log","apiRes","getListenById","data","listen","Video","Image","handleChange","name","handleChangeValue","event","newValue","onSubmit","dataSend","videoUrl","putListen","_id","status","error","message","response","handleClickGoBack","push","root","title","avtWrap","avt","cameraIconWrap","fileInput","grid","Boolean","width","borderBottom","borderColor","btn","btnReset","onSubmitForm","func","bool","defaultProps"],"mappings":"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","sourcesContent":["import { yupResolver } from \"@hookform/resolvers/yup\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport LoopIcon from \"@material-ui/icons/Loop\";\nimport ResetIcon from \"@material-ui/icons/RotateLeft\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport listeningApi from \"apis/listeningApi\";\nimport InputCustom from \"components/UI/InputCustom\";\nimport SelectCustom from \"components/UI/SelectCustom\";\nimport { LISTEN_TOPIC } from \"constants/listeningTopics\";\nimport PropTypes from \"prop-types\";\nimport React, { useState, useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { setMessage } from \"redux/actions/messageAction\";\nimport * as yup from \"yup\";\nimport InformationTooltip from \"./../CreateListen/InformationTooltip\";\nimport useStyle from \"./style\";\nimport { useParams } from \"react-router-dom\";\nimport { convertImageToBase64 } from \"helper/index\";\nimport useTitle from \"hooks/useTitle\";\nimport Box from \"@material-ui/core/Box\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport { useHistory } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport RichTextEditor from 'components/UI/RichTextEditor';\n\nconst schema = yup.object().shape({\n  Name: yup.string().trim().required(\"Input value\"),\n  Description: yup.string().required(\"Input value\"),\n  Topic: yup\n    .string()\n    .required(\"Select one\")\n    .oneOf(LISTEN_TOPIC.map((i) => i.value)),\n  LinkVideo: yup.string(),\n  Script: yup.string(),\n});\n\nconst analysisLinkVideo = (linkVideo = \"\") => {\n  if (typeof linkVideo !== \"string\" || linkVideo === \"\") {\n    return null;\n  }\n  if (linkVideo.includes(\"embed\")) {\n    return linkVideo;\n  }\n\n  let checkVid = linkVideo.includes(\"https://www.youtube.com\");\n  if (!checkVid) {\n    checkVid = linkVideo.includes(\"youtu.be/\");\n    if (checkVid) {\n      return linkVideo;\n    }\n    return null;\n  }\n  return linkVideo;\n};\nconst getTypeCurrent = (type = \"\", options = []) => {\n  for (let i = 0; i < options.length; i++) {\n    if (options[i].value === type) {\n      return i;\n    }\n  }\n  return 0;\n};\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box sx={{ p: 3 }}>\n          <Grid>{children}</Grid>\n        </Box>\n      )}\n    </div>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.number.isRequired,\n  value: PropTypes.number.isRequired,\n};\n\nfunction a11yProps(index) {\n  return {\n    id: `simple-tab-${index}`,\n    \"aria-controls\": `simple-tabpanel-${index}`,\n  };\n}\n\nfunction EditListening() {\n  useTitle(\"Edit Listening\");\n  const classes = useStyle();\n  const [value, setValue] = useState(1);\n  const [submitting, setSubmitting] = useState(false);\n  const defaultImg =\n    \"https://res.cloudinary.com/phongvn2611/image/upload/v1638368033/english/word/default-image_fbmbtn.png\";\n\n  const history = useHistory();\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm({\n    resolver: yupResolver(schema),\n  });\n  const dispatch = useDispatch();\n\n  const [listenValue, setListenValue] = useState(null);\n  const [image, setImage] = useState(defaultImg);\n  const [video, setVideo] = useState(null);\n  const [linkVideo, setLinkVideo] = useState(\"\");\n  const [script, setScript] = useState(\"\");\n  const handleChangePicture = (e) => {\n    e.preventDefault();\n    try {\n      const file = e.target.files[0];\n      if (!file) {\n        dispatch(setMessage(\"No files were uploaded\", \"error\"));\n      }\n      if (file.size / 1024 ** 2 > 2) {\n        dispatch(setMessage(\"Size too large\", \"error\"));\n      }\n      convertImageToBase64(file).then((res) => {\n        setImage(res);\n      });\n    } catch (err) {\n      throw err;\n    }\n  };\n\n  const handleChangeVideo = (e) => {\n    e.preventDefault();\n    try {\n      const file = e.target.files[0];\n      // console.log(file)\n      if (!file) {\n        dispatch(setMessage(\"No files were uploaded\", \"error\"));\n      }\n      if (file.size / 1024 ** 2 > 2) {\n        dispatch(setMessage(\"Size too large\", \"error\"));\n      }\n      convertImageToBase64(file).then((res) => {\n        setVideo(res);\n        console.log(res);\n      });\n    } catch (err) {\n      throw err;\n    }\n  };\n\n  const { id } = useParams();\n\n  useEffect(() => {\n    (async function () {\n      const apiRes = await listeningApi.getListenById(id);\n      setListenValue(apiRes.data.listen);\n      if (apiRes.data.listen.Video.includes(\"youtube\")) {\n        setLinkVideo(apiRes.data.listen.Video);\n      }\n      // else{\n      //   setVideo(apiRes.data.listen.Video);\n      // }\n      setImage(apiRes.data.listen.Image);\n    })();\n    return () => {};\n  }, [id]);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setListenValue({ ...listenValue, [name]: value });\n    if (name === \"LinkVideo\") {\n      setLinkVideo(value);\n    }\n  };\n\n  const handleChangeValue = (event, newValue) => {\n    setValue(newValue);\n  };\n\n  const onSubmit = async () => {\n    try {\n      setSubmitting(true);\n      const { Name, Topic, Description, Script, Video } = listenValue;\n      let dataSend = [];\n      let videoUrl = null;\n      if (video == null) {\n        console.log(video);\n        console.log(linkVideo);\n        if (linkVideo == null || linkVideo.trim() === \"\") {\n          videoUrl = Video;\n        } else {\n          videoUrl = analysisLinkVideo(linkVideo);\n          if (videoUrl == null) {\n            dispatch(setMessage(\"Link video is invalid.\", \"warning\"));\n            setSubmitting(false);\n            return;\n          }\n        }\n        console.log(videoUrl);\n        dataSend = {\n          Name,\n          Topic,\n          Description,\n          Script,\n          Image: image,\n          Video: videoUrl,\n        };\n      } else {\n        dataSend = {\n          Name,\n          Topic,\n          Description,\n          Script,\n          Image: image,\n          Video: video,\n        };\n      }\n      console.log(dataSend);\n      const apiRes = await listeningApi.putListen(listenValue._id, dataSend);\n      console.log(apiRes.data);\n      if (apiRes.status === 200) {\n        dispatch(setMessage(\"Update listening successfully\", \"success\"));\n        setSubmitting(false);\n      }\n    } catch (error) {\n      const message =\n        error.response?.data?.message || \"Error, can not create listening.\";\n      dispatch(setMessage(message, \"error\"));\n      setSubmitting(false);\n    }\n  };\n\n  function handleClickGoBack() {\n    history.push(\"/admin/listening\");\n  }\n\n  return (\n    <div className={classes.root}>\n      <h1 className={classes.title}>Edit Listening</h1>\n      <div className=\"dyno-break\"></div>\n\n      {listenValue && (\n        <form onSubmit={handleSubmit(onSubmit)} autoComplete=\"off\">\n          <Grid container alignContent=\"center\">\n            <div className={classes.avtWrap}>\n              <img\n                src={image ? image : defaultImg}\n                alt=\"\"\n                className={`${classes.avt} w-100 h-100`}\n              />\n              <div className={`${classes.cameraIconWrap} flex-center`}>\n                <input\n                  type=\"file\"\n                  className={classes.fileInput}\n                  onChange={handleChangePicture}\n                  accept=\"image/*\"\n                />\n              </div>\n            </div>\n          </Grid>\n          <Grid className={classes.grid} container spacing={3}>\n            <Grid item xs={12} md={6} lg={4}>\n              <InputCustom\n                className=\"w-100\"\n                label=\"Name\"\n                value={listenValue.Name}\n                error={Boolean(errors.Name)}\n                inputProps={{\n                  name: \"Name\",\n                  ...register(\"Name\"),\n                }}\n                onChange={handleChange}\n              />\n              {errors.Name && (\n                <p className=\"text-error\">{errors.Name?.message}</p>\n              )}\n            </Grid>\n            <Grid item xs={12} md={6} lg={4}>\n              <InputCustom\n                className=\"w-100\"\n                label=\"Description\"\n                value={listenValue.Description}\n                error={Boolean(errors.Description)}\n                inputProps={{\n                  name: \"Description\",\n                  ...register(\"Description\"),\n                }}\n                onChange={handleChange}\n              />\n              {errors.Description && (\n                <p className=\"text-error\">{errors.Description?.message}</p>\n              )}\n            </Grid>\n            <Grid item xs={12} md={6} lg={4}>\n              <SelectCustom\n                className=\"w-100\"\n                label=\"Topic (*)\"\n                options={LISTEN_TOPIC}\n                error={Boolean(errors.LISTEN_TOPIC)}\n                index={getTypeCurrent(listenValue.Topic, LISTEN_TOPIC)}\n                inputProps={{\n                  name: \"Topic\",\n                  ...register(\"Topic\"),\n                }}\n                onChange={handleChange}\n              />\n              {errors.Topic && (\n                <p className=\"text-error\">{errors.Topic?.message}</p>\n              )}\n            </Grid>\n\n            <Box sx={{ width: \"100%\" }}>\n              <Box sx={{ borderBottom: 1, borderColor: \"divider\" }}>\n                <Tabs\n                  value={value}\n                  onChange={handleChangeValue}\n                  aria-label=\"basic tabs example\"\n                  indicatorColor=\"primary\"\n                >\n                  <Tab label=\"Upload\" {...a11yProps(0)} />\n                  <Tab label=\"Link\" {...a11yProps(1)} />\n                </Tabs>\n              </Box>\n              <TabPanel value={value} index={0}>\n                {/* Video */}\n                <Grid item xs={6}>\n                  <Grid container alignContent=\"center\">\n                    <div className={classes.avtWrap}>\n                      <div className={`${classes.cameraIconWrap} flex-center`}>\n                        <input\n                          type=\"file\"\n                          value={listenValue.Video.fileInput}\n                          className={classes.fileInput}\n                          onChange={handleChangeVideo}\n                          accept=\"video/*\"\n                        />\n                      </div>\n                    </div>\n                  </Grid>\n                </Grid>\n              </TabPanel>\n\n              <TabPanel value={value} index={1}>\n                <Grid item xs={6}>\n                  <InputCustom\n                    className=\"w-100\"\n                    label=\"Link Video\"\n                    multiline\n                    value={linkVideo}\n                    endAdornment={\n                      <InformationTooltip title=\"Input link youtube\" />\n                    }\n                    inputProps={{\n                      name: \"LinkVideo\",\n                      ...register(\"LinkVideo\"),\n                    }}\n                    onChange={handleChange}\n                  />\n\n                  {errors.Video && (\n                    <p className=\"text-error\">{errors.Video?.message}</p>\n                  )}\n                </Grid>\n              </TabPanel>\n            </Box>\n\n            {/* examples */}\n            <Grid item xs={12} md={6} lg={4}>\n              <InputCustom\n                className=\"w-100\"\n                label=\"Script\"\n                value={listenValue.Script}\n                multiline\n                endAdornment={\n                  <InformationTooltip title=\"Thêm các câu ví dụ cho từ trên. Đảm bảo có sự xuất hiện của từ đó trong câu. Bạn có thể thêm nhiều câu bằng cách xuống dòng.\" />\n                }\n                error={Boolean(errors.Script)}\n                inputProps={{\n                  name: \"Script\",\n                  ...register(\"Script\"),\n                }}\n                onChange={handleChange}\n              />\n\n              {errors.Script && (\n                <p className=\"text-error\">{errors.Script?.message}</p>\n              )}\n            </Grid>\n          </Grid>\n\n          <div className=\"dyno-break\"></div>\n          {/* button group */}\n          <div className=\"d-flex flex-end jus-content-end pt-5 w-100\">\n            <Button\n              className={`${classes.btn} ${classes.btnReset}`}\n              color=\"secondary\"\n              endIcon={<ResetIcon />}\n              variant=\"outlined\"\n              // disabled={}\n              onClick={() => handleClickGoBack()}\n            >\n              Back\n            </Button>\n            <Button\n              type=\"submit\"\n              className={`${classes.btn} _btn _btn-primary`}\n              disabled={submitting}\n              endIcon={\n                submitting ? <LoopIcon className=\"ani-spin\" /> : <SaveIcon />\n              }\n              variant=\"contained\"\n              onClick={() => onSubmit()}\n            >\n              Edit\n            </Button>\n          </div>\n        </form>\n      )}\n    </div>\n  );\n}\n\nEditListening.propTypes = {\n  onSubmitForm: PropTypes.func,\n  submitting: PropTypes.bool,\n};\n\nEditListening.defaultProps = {\n  onSubmitForm: function () {},\n  submitting: false,\n};\n\nexport default EditListening;\n"]},"metadata":{},"sourceType":"module"}