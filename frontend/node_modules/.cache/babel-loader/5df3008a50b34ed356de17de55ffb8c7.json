{"ast":null,"code":"var _jsxFileName = \"E:\\\\TLCN\\\\LearningEnglishWebsite\\\\frontend\\\\src\\\\pages\\\\AddUser.js\",\n    _s = $RefreshSig$();\n\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport LoopIcon from \"@material-ui/icons/Loop\";\nimport ResetIcon from \"@material-ui/icons/RotateLeft\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport InputCustom from \"components/UI/InputCustom\";\nimport SelectCustom from \"components/UI/SelectCustom\";\nimport { ROUTES, ROLE_TYPE } from \"constants/index\";\nimport React, { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useDispatch } from \"react-redux\";\nimport { setMessage } from \"redux/actions/messageAction\";\nimport * as yup from \"yup\";\nimport { useHistory } from \"react-router-dom\";\nimport CameraIcon from \"@material-ui/icons/PhotoCamera\";\nimport { convertImageToBase64 } from \"helper/index\";\nimport useTitle from \"hooks/useTitle\";\nimport VisibilityIcon from \"@material-ui/icons/Visibility\";\nimport VisibilityOffIcon from \"@material-ui/icons/VisibilityOff\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport userApi from 'apis/userApi';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst nameRegex = /^[^\\d~`!@#$%^&*\\(\\)\\\\\\|\\.,\\?\\/\\-\\+\\=\\_]+$/gi;\nconst schema = yup.object().shape({\n  email: yup.string().trim().required(\"Nhập email\").email(\"Email không hợp lệ\"),\n  name: yup.string().trim().required(\"Nhập họ tên\").matches(nameRegex, \"Họ tên không chứa số và ký tự đặc biệt\")\n});\nconst useStyle = makeStyles(() => ({\n  wrap: {\n    minHeight: \"calc(100vh - 7.2rem)\"\n  },\n  root: {\n    backgroundColor: \"var(--bg-color-sec)\",\n    padding: \"1.5rem 2.5rem\",\n    borderRadius: \"var(--border-radius)\",\n    textAlign: \"center\",\n    boxShadow: \"var(--box-shadow)\"\n  },\n  avtWrap: {\n    width: \"15rem\",\n    height: \"15rem\",\n    position: \"relative\"\n  },\n  avt: {\n    borderRadius: \"50%\",\n    border: \"2px solid var(--primary-color)\"\n  },\n  cameraIconWrap: {\n    position: \"absolute\",\n    right: 0,\n    bottom: 0,\n    width: \"4.2rem\",\n    height: \"4.2rem\",\n    padding: \"1.2rem\",\n    backgroundColor: \"var(--primary-color)\",\n    borderRadius: \"50%\",\n    cursor: \"pointer\",\n    border: \"solid 5px var(--bg-color-sec)\",\n    \"&:hover, &:active\": {\n      opacity: 0.85\n    }\n  },\n  cameraIcon: {\n    color: \"var(--text-color)\",\n    fontSize: \"2rem\"\n  },\n  fileInput: {\n    position: \"absolute\",\n    width: \"100%\",\n    height: \"100%\",\n    top: 0,\n    left: 0,\n    opacity: 0,\n    cursor: \"pointer\"\n  },\n  name: {\n    fontSize: \"2.4rem\",\n    lineHeight: 1.5,\n    letterSpacing: \"0.75px\"\n  },\n  role: {\n    fontSize: \"1.5rem\",\n    fontWeight: 400,\n    color: \"var(--label-color)\",\n    letterSpacing: \"0.75px\",\n    textTransform: \"capitalize\"\n  },\n  info: {\n    margin: \"2.4rem 0\",\n    \"& p\": {\n      lineHeight: 2,\n      fontSize: \"1.6rem\",\n      letterSpacing: \"0.75px\",\n      color: \"var(--text-color)\"\n    }\n  },\n  coin: {\n    color: \"var(--label-color)\",\n    fontWeight: \"bold\",\n    fontSize: \"2rem\"\n  },\n  icon: {\n    fontSize: \"1.8rem\",\n    color: \"var(--grey)\",\n    cursor: \"pointer\"\n  },\n  visiblePw: {\n    color: \"var(--primary-color)\"\n  },\n  visibleConfirmPw: {\n    color: \"var(--primary-color)\"\n  },\n  editBtn: {\n    padding: \"5px 10px\"\n  },\n  textError: {\n    marginTop: \"4px\",\n    color: \"var(--error-color)\",\n    fontSize: \"1.2rem\",\n    textAlign: \"left\"\n  }\n}));\n\nfunction AddUserPage() {\n  _s();\n\n  var _errors$email, _errors$name;\n\n  useTitle(\"Add user\");\n  const classes = useStyle();\n  const defaultImg = \"https://res.cloudinary.com/phongvn2611/image/upload/v1634179173/english/avatar/avatar-default_tx5lsb.png\";\n  const [submitting, setSubmitting] = useState(false);\n  const [avatar, setAvatar] = useState(defaultImg);\n  const [user, setUser] = useState({\n    name: \"\",\n    email: \"\",\n    role: \"\"\n  });\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setUser({ ...user,\n      [name]: value\n    });\n  };\n\n  const handleChangeAvatar = e => {\n    e.preventDefault();\n\n    try {\n      const file = e.target.files[0];\n\n      if (!file) {\n        dispatch(setMessage(\"No files were uploaded\", \"errors\"));\n      }\n\n      if (file.size / 1024 ** 2 > 2) {\n        dispatch(setMessage(\"Size too large\", \"errors\"));\n      }\n\n      convertImageToBase64(file).then(res => {\n        setAvatar(res);\n      });\n    } catch (err) {\n      throw err;\n    }\n  };\n\n  const handleAddUser = async () => {\n    try {\n      setSubmitting(true);\n      const dataSend = {\n        name: user.name,\n        email: user.email,\n        avatar,\n        role: user.role\n      };\n      const res = await userApi.addUser(dataSend);\n\n      if (res) {\n        dispatch(setMessage(res.data.message, 'success'));\n        setSubmitting(false);\n        history.replace(ROUTES.USER_ADMIN);\n      }\n    } catch (error) {\n      dispatch(setMessage(error.response.data.message, 'error'));\n      setSubmitting(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `${classes.wrap} container flex-center`,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.root,\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        autoComplete: \"off\",\n        onSubmit: handleSubmit(handleAddUser),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-center w-100 h-100\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.avtWrap,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: avatar ? avatar : defaultImg,\n              alt: \"\",\n              className: `${classes.avt} w-100 h-100`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `${classes.cameraIconWrap} flex-center`,\n              children: [/*#__PURE__*/_jsxDEV(CameraIcon, {\n                className: classes.cameraIcon\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                className: classes.fileInput,\n                accept: \"image/*\",\n                onChange: handleChangeAvatar\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-col mt-10\",\n          children: [/*#__PURE__*/_jsxDEV(InputCustom, {\n            label: \"Email\",\n            size: \"small\",\n            placeholder: \"Nh\\u1EADp email\",\n            error: Boolean(errors.email),\n            inputProps: {\n              name: \"email\",\n              autoFocus: true,\n              ...register(\"email\")\n            },\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this), errors.email && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-error\",\n            children: (_errors$email = errors.email) === null || _errors$email === void 0 ? void 0 : _errors$email.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(InputCustom, {\n            label: \"H\\u1ECD t\\xEAn\",\n            size: \"small\",\n            placeholder: \"Nh\\u1EADp h\\u1ECD t\\xEAn\",\n            className: \"mt-10\",\n            error: Boolean(errors.name),\n            inputProps: {\n              name: \"name\",\n              ...register(\"name\")\n            },\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this), errors.name && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-error\",\n            children: (_errors$name = errors.name) === null || _errors$name === void 0 ? void 0 : _errors$name.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(SelectCustom, {\n            className: \"mt-10\",\n            label: \"Quy\\u1EC1n\",\n            options: ROLE_TYPE,\n            index: 0,\n            inputProps: {\n              name: \"role\"\n            },\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex-center flex-center-col mt-10\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            className: `${classes.editBtn} _btn _btn-outlined-accent mb-4 w-100`,\n            children: \"Quay l\\u1EA1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            className: `${classes.editBtn} _btn _btn-primary w-100`,\n            disabled: submitting,\n            endIcon: submitting ? /*#__PURE__*/_jsxDEV(LoopIcon, {\n              className: \"ani-spin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 30\n            }, this) : /*#__PURE__*/_jsxDEV(SaveIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 66\n            }, this),\n            variant: \"contained\",\n            children: \"Th\\xEAm\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 212,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AddUserPage, \"8+027HgpdM1U7dMLNQxbyIn6sLU=\", false, function () {\n  return [useTitle, useStyle, useHistory, useDispatch, useForm];\n});\n\n_c = AddUserPage;\nexport default AddUserPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddUserPage\");","map":{"version":3,"sources":["E:/TLCN/LearningEnglishWebsite/frontend/src/pages/AddUser.js"],"names":["yupResolver","Button","Grid","LoopIcon","ResetIcon","SaveIcon","InputCustom","SelectCustom","ROUTES","ROLE_TYPE","React","useState","useForm","useDispatch","setMessage","yup","useHistory","CameraIcon","convertImageToBase64","useTitle","VisibilityIcon","VisibilityOffIcon","makeStyles","userApi","nameRegex","schema","object","shape","email","string","trim","required","name","matches","useStyle","wrap","minHeight","root","backgroundColor","padding","borderRadius","textAlign","boxShadow","avtWrap","width","height","position","avt","border","cameraIconWrap","right","bottom","cursor","opacity","cameraIcon","color","fontSize","fileInput","top","left","lineHeight","letterSpacing","role","fontWeight","textTransform","info","margin","coin","icon","visiblePw","visibleConfirmPw","editBtn","textError","marginTop","AddUserPage","classes","defaultImg","submitting","setSubmitting","avatar","setAvatar","user","setUser","history","dispatch","register","handleSubmit","formState","errors","resolver","handleChange","e","value","target","handleChangeAvatar","preventDefault","file","files","size","then","res","err","handleAddUser","dataSend","addUser","data","message","replace","USER_ADMIN","error","response","Boolean","autoFocus"],"mappings":"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","sourcesContent":["import { yupResolver } from \"@hookform/resolvers/yup\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport LoopIcon from \"@material-ui/icons/Loop\";\nimport ResetIcon from \"@material-ui/icons/RotateLeft\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport InputCustom from \"components/UI/InputCustom\";\nimport SelectCustom from \"components/UI/SelectCustom\";\nimport { ROUTES, ROLE_TYPE } from \"constants/index\";\nimport React, { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useDispatch } from \"react-redux\";\nimport { setMessage } from \"redux/actions/messageAction\";\nimport * as yup from \"yup\";\nimport { useHistory } from \"react-router-dom\";\nimport CameraIcon from \"@material-ui/icons/PhotoCamera\";\nimport { convertImageToBase64 } from \"helper/index\";\nimport useTitle from \"hooks/useTitle\";\nimport VisibilityIcon from \"@material-ui/icons/Visibility\";\nimport VisibilityOffIcon from \"@material-ui/icons/VisibilityOff\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport userApi from 'apis/userApi';\n\nconst nameRegex = /^[^\\d~`!@#$%^&*\\(\\)\\\\\\|\\.,\\?\\/\\-\\+\\=\\_]+$/gi;\nconst schema = yup.object().shape({\n  email: yup.string().trim().required(\"Nhập email\").email(\"Email không hợp lệ\"),\n  name: yup\n    .string()\n    .trim()\n    .required(\"Nhập họ tên\")\n    .matches(nameRegex, \"Họ tên không chứa số và ký tự đặc biệt\"),\n});\n\nconst useStyle = makeStyles(() => ({\n  wrap: {\n    minHeight: \"calc(100vh - 7.2rem)\",\n  },\n\n  root: {\n    backgroundColor: \"var(--bg-color-sec)\",\n    padding: \"1.5rem 2.5rem\",\n    borderRadius: \"var(--border-radius)\",\n    textAlign: \"center\",\n    boxShadow: \"var(--box-shadow)\",\n  },\n\n  avtWrap: {\n    width: \"15rem\",\n    height: \"15rem\",\n    position: \"relative\",\n  },\n\n  avt: {\n    borderRadius: \"50%\",\n    border: \"2px solid var(--primary-color)\",\n  },\n\n  cameraIconWrap: {\n    position: \"absolute\",\n    right: 0,\n    bottom: 0,\n\n    width: \"4.2rem\",\n    height: \"4.2rem\",\n    padding: \"1.2rem\",\n\n    backgroundColor: \"var(--primary-color)\",\n    borderRadius: \"50%\",\n    cursor: \"pointer\",\n    border: \"solid 5px var(--bg-color-sec)\",\n\n    \"&:hover, &:active\": {\n      opacity: 0.85,\n    },\n  },\n\n  cameraIcon: {\n    color: \"var(--text-color)\",\n    fontSize: \"2rem\",\n  },\n\n  fileInput: {\n    position: \"absolute\",\n    width: \"100%\",\n    height: \"100%\",\n    top: 0,\n    left: 0,\n    opacity: 0,\n    cursor: \"pointer\",\n  },\n\n  name: {\n    fontSize: \"2.4rem\",\n    lineHeight: 1.5,\n    letterSpacing: \"0.75px\",\n  },\n\n  role: {\n    fontSize: \"1.5rem\",\n    fontWeight: 400,\n    color: \"var(--label-color)\",\n    letterSpacing: \"0.75px\",\n    textTransform: \"capitalize\",\n  },\n\n  info: {\n    margin: \"2.4rem 0\",\n\n    \"& p\": {\n      lineHeight: 2,\n      fontSize: \"1.6rem\",\n      letterSpacing: \"0.75px\",\n      color: \"var(--text-color)\",\n    },\n  },\n\n  coin: {\n    color: \"var(--label-color)\",\n    fontWeight: \"bold\",\n    fontSize: \"2rem\",\n  },\n  icon: {\n    fontSize: \"1.8rem\",\n    color: \"var(--grey)\",\n    cursor: \"pointer\",\n  },\n\n  visiblePw: {\n    color: \"var(--primary-color)\",\n  },\n  visibleConfirmPw: {\n    color: \"var(--primary-color)\",\n  },\n  editBtn: {\n    padding: \"5px 10px\",\n  },\n  textError: {\n    marginTop: \"4px\",\n    color: \"var(--error-color)\",\n    fontSize: \"1.2rem\",\n    textAlign: \"left\",\n  },\n}));\n\nfunction AddUserPage() {\n  useTitle(\"Add user\");\n  const classes = useStyle();\n  const defaultImg =\n    \"https://res.cloudinary.com/phongvn2611/image/upload/v1634179173/english/avatar/avatar-default_tx5lsb.png\";\n  const [submitting, setSubmitting] = useState(false);\n  const [avatar, setAvatar] = useState(defaultImg);\n  const [user, setUser] = useState({\n    name: \"\",\n    email: \"\",\n    role: \"\"\n  });\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm({\n    resolver: yupResolver(schema),\n  });\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setUser({ ...user, [name]: value });\n  };\n\n  const handleChangeAvatar = (e) => {\n    e.preventDefault();\n    try {\n      const file = e.target.files[0];\n      if (!file) {\n        dispatch(setMessage(\"No files were uploaded\", \"errors\"));\n      }\n      if (file.size / 1024 ** 2 > 2) {\n        dispatch(setMessage(\"Size too large\", \"errors\"));\n      }\n      convertImageToBase64(file).then((res) => {\n        setAvatar(res);\n      });\n    } catch (err) {\n      throw err;\n    }\n  };\n  const handleAddUser = async () => {\n    try {\n      setSubmitting(true);\n      const dataSend = {\n        name: user.name,\n        email: user.email,\n        avatar,\n        role: user.role\n      }\n      const res = await userApi.addUser(dataSend);\n      if (res) {\n        dispatch(setMessage(res.data.message, 'success'));\n        setSubmitting(false);\n        history.replace(ROUTES.USER_ADMIN);\n      }\n    }\n    catch (error) {\n      dispatch(setMessage(error.response.data.message, 'error'));\n      setSubmitting(false);\n    }\n  }\n\n  return (\n    <div className={`${classes.wrap} container flex-center`}>\n      <div className={classes.root}>\n        <form autoComplete=\"off\" onSubmit={handleSubmit(handleAddUser)}>\n          <div className=\"flex-center w-100 h-100\">\n            <div className={classes.avtWrap}>\n              <img\n                src={avatar ? avatar : defaultImg}\n                alt=\"\"\n                className={`${classes.avt} w-100 h-100`}\n              />\n              <div className={`${classes.cameraIconWrap} flex-center`}>\n                <CameraIcon className={classes.cameraIcon} />\n                <input\n                  type=\"file\"\n                  className={classes.fileInput}\n                  accept=\"image/*\"\n                  onChange={handleChangeAvatar}\n                />\n              </div>\n            </div>\n          </div>\n          <div className=\"flex-col mt-10\">\n            <InputCustom\n              label=\"Email\"\n              size=\"small\"\n              placeholder=\"Nhập email\"\n              error={Boolean(errors.email)}\n              inputProps={{\n                name: \"email\",\n                autoFocus: true,\n                ...register(\"email\"),\n              }}\n              onChange={handleChange}\n            />\n            {errors.email && (\n              <p className=\"text-error\">{errors.email?.message}</p>\n            )}\n            <InputCustom\n              label=\"Họ tên\"\n              size=\"small\"\n              placeholder=\"Nhập họ tên\"\n              className=\"mt-10\"\n              error={Boolean(errors.name)}\n              inputProps={{\n                name: \"name\",\n                ...register(\"name\"),\n              }}\n              onChange={handleChange}\n            />\n            {errors.name && (\n              <p className=\"text-error\">{errors.name?.message}</p>\n            )}\n            \n            <SelectCustom\n              className=\"mt-10\"\n              label=\"Quyền\"\n              options={ROLE_TYPE}\n              index={0}\n              inputProps={{\n                name: \"role\",\n              }}\n              onChange={handleChange}\n            />\n          </div>\n\n          <div className=\"d-flex-center flex-center-col mt-10\">\n            <Button\n              className={`${classes.editBtn} _btn _btn-outlined-accent mb-4 w-100`}\n            >\n              Quay lại\n            </Button>\n            <Button\n              type=\"submit\"\n              className={`${classes.editBtn} _btn _btn-primary w-100`}\n              disabled={submitting}\n              endIcon={\n                submitting ? <LoopIcon className=\"ani-spin\" /> : <SaveIcon />\n              }\n              variant=\"contained\"\n            >\n              Thêm\n            </Button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default AddUserPage;\n"]},"metadata":{},"sourceType":"module"}